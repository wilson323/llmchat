# =================================
# 🔐 LLMChat 安全配置模板
# =================================
#
# ⚠️ 重要安全提醒：
# 1. 复制此文件为 .env 并填写真实值
# 2. 绝对不要将 .env 文件提交到版本控制系统
# 3. 请确保 .env 已添加到 .gitignore 中
# 4. 生产环境请使用强密码和安全的密钥
# 5. 定期轮换 API 密钥和访问令牌
#
# 📋 配置说明：
# - 所有敏感信息都应通过环境变量配置
# - 使用强密码和随机生成的密钥
# - 不同环境使用不同的配置值
# - 定期审查和更新安全配置

# =================================
# 🖥️ 服务器基础配置
# =================================
PORT=3001
NODE_ENV=development

# 前端地址（生产环境必须修改为实际域名）
FRONTEND_URL=http://localhost:3000

# 智能体配置文件路径
AGENTS_CONFIG_PATH=../config/agents.json

# =================================
# 🔑 API 密钥配置 - FastGPT 智能体
# =================================
# 🚨 安全警告：以下为敏感信息，请妥善保管
# 建议使用专门的密钥管理服务（如 AWS Secrets Manager、HashiCorp Vault）

# FastGPT 智能体 1 - 熵犇犇售后服务助手
FASTGPT_AGENT_ID_1=your_agent_id_here
FASTGPT_APP_ID_1=your_app_id_here
FASTGPT_AGENT_NAME_1=熵犇犇售后服务助手
FASTGPT_AGENT_DESCRIPTION_1=基于 FastGPT 的知识库问答助手，支持自定义知识库和工作流
FASTGPT_ENDPOINT_1=http://your-fastgpt-server:3000/api/v1/chat/completions
FASTGPT_API_KEY_1=your_secure_api_key_here
FASTGPT_MODEL_1=FastAI-4k
FASTGPT_RATE_LIMIT_RPM_1=60
FASTGPT_RATE_LIMIT_TPM_1=40000

# FastGPT 智能体 2 - 配单智能应用
FASTGPT_AGENT_ID_2=your_agent_id_here
FASTGPT_APP_ID_2=your_app_id_here
FASTGPT_AGENT_NAME_2=配单智能应用
FASTGPT_AGENT_DESCRIPTION_2=基于 FastGPT 的知识库问答助手，支持自定义知识库和工作流
FASTGPT_ENDPOINT_2=http://your-fastgpt-server:3000/api/v1/chat/completions
FASTGPT_API_KEY_2=your_secure_api_key_here
FASTGPT_MODEL_2=FastAI-4k
FASTGPT_RATE_LIMIT_RPM_2=60
FASTGPT_RATE_LIMIT_TPM_2=40000

# FastGPT 智能体 3 - 需求分析
FASTGPT_AGENT_ID_3=your_agent_id_here
FASTGPT_APP_ID_3=your_app_id_here
FASTGPT_AGENT_NAME_3=需求分析
FASTGPT_AGENT_DESCRIPTION_3=基于 FastGPT 的知识库问答助手，支持自定义知识库和工作流
FASTGPT_ENDPOINT_3=http://your-fastgpt-server:3000/api/v1/chat/completions
FASTGPT_API_KEY_3=your_secure_api_key_here
FASTGPT_MODEL_3=FastAI-4k
FASTGPT_RATE_LIMIT_RPM_3=60
FASTGPT_RATE_LIMIT_TPM_3=40000

# =================================
# 🛡️ 安全认证配置
# =================================
# JWT 令牌配置（如果启用认证）
JWT_SECRET=your_super_secure_jwt_secret_key_here_minimum_32_characters
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# API 访问控制
API_ACCESS_TOKEN=your_api_access_token_here
API_KEY_HEADER_NAME=x-api-key

# CORS 安全配置
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# =================================
# 📝 日志和监控配置
# =================================
LOG_LEVEL=info
LOG_FORMAT=json

# 可选：HTTP 日志导出配置（用于无侵入上报到观测平台）
# LOG_EXPORT_HTTP_ENDPOINT=https://observer.internal/api/logs
# LOG_EXPORT_HTTP_HEADERS={"Authorization":"Bearer your_log_token"}
# LOG_EXPORT_HTTP_BATCH=25
# LOG_EXPORT_HTTP_INTERVAL=2000

# 安全日志配置
SECURITY_LOG_ENABLED=true
SECURITY_LOG_FILE=logs/security.log
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=logs/audit.log

# =================================
# ⚡ 性能和限制配置
# =================================
# 请求超时时间（毫秒）
REQUEST_TIMEOUT=30000

# 速率限制配置（支持高并发，最大1000/分钟）
RATE_LIMIT_POINTS=1000
RATE_LIMIT_DURATION=60
RATE_LIMIT_BLOCK_DURATION=60
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_WINDOW_MS=60000

# 熔断器配置（防止级联故障）
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT=10000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# 重试配置
RETRY_MAX_RETRIES=3
RETRY_BASE_DELAY=1000
RETRY_MAX_DELAY=10000
RETRY_BACKOFF_FACTOR=2
RETRY_ENABLE_JITTER=true

# 降级配置
FALLBACK_ENABLED=true
FALLBACK_CACHE_TTL=300000
FALLBACK_MAX_CACHE_SIZE=100

# =================================
# 📊 监控和告警配置
# =================================
MONITORING_ENABLED=true
MONITORING_METRICS_INTERVAL=60000
MONITORING_HEALTH_CHECK_INTERVAL=60000
MONITORING_SLA_UPDATE_INTERVAL=60000

# 告警配置
ALERT_CONSOLE_ENABLED=true
ALERT_WEBHOOK_ENABLED=false
ALERT_WEBHOOK_URL=
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_SMTP_HOST=
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USERNAME=
ALERT_EMAIL_PASSWORD=
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=

# =================================
# 🔧 第三方服务配置
# =================================
# 阿里图片生成（产品现场预览）
ALIYUN_IMAGE_API_URL=https://dashscope.aliyuncs.com/api/v1/services/aigc/image-generation/generation
ALIYUN_IMAGE_API_KEY=your_aliyun_dashscope_api_key_here
ALIYUN_IMAGE_MODEL=wanx-stylepro-v1

# 可选：指定工作空间
# ALIYUN_WORKSPACE_ID=

# Redis 配置（如果使用缓存）
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password_here

# 数据库配置（如果使用）
DATABASE_URL=your_database_connection_string_here

# =================================
# 🔒 生产环境安全配置
# =================================
# 生产环境请取消注释并配置以下选项：

# 强制 HTTPS
# FORCE_HTTPS=true

# 安全头配置
# HELMET_ENABLED=true
# CSP_ENABLED=true

# 请求大小限制
# REQUEST_SIZE_LIMIT=10mb

# IP 白名单（可选）
# IP_WHITELIST=127.0.0.1,::1,your.server.ip

# 禁用服务器信息泄露
# DISABLE_X_POWERED_BY=true

# =================================
# 📋 配置检查清单
# =================================
# 部署前请确认：
# [ ] 所有 ${VARIABLE} 都已替换为实际值
# [ ] API 密钥和密码足够强壮
# [ ] 生产环境使用 HTTPS
# [ ] 防火墙规则正确配置
# [ ] 日志轮转策略已设置
# [ ] 备份策略已制定
# [ ] 监控告警已配置
# [ ] 安全扫描已通过