#!/usr/bin/env sh
# TypeScript ä¸¥æ ¼è´¨é‡é—¨ç¦ pre-commit hook
# é›¶å®¹å¿TypeScripté”™è¯¯æ”¿ç­–

echo "ğŸ” TypeScript Pre-commit è´¨é‡æ£€æŸ¥"
echo "=================================="

# è¿è¡ŒTypeScriptè´¨é‡é—¨ç¦æ£€æŸ¥
pnpm run typescript:quality-gates:basic

# æ£€æŸ¥ç»“æœ
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ TypeScript è´¨é‡æ£€æŸ¥å¤±è´¥!"
  echo "ğŸš¨ é›¶å®¹å¿æ”¿ç­–: ä¸å…è®¸åŒ…å«TypeScripté”™è¯¯çš„æäº¤"
  echo ""
  echo "ğŸ“‹ è¯·ä¿®å¤ä»¥ä¸‹é—®é¢˜åé‡æ–°æäº¤:"
  echo "1. è¿è¡Œ 'pnpm run typescript:quality-gates' æŸ¥çœ‹è¯¦ç»†é”™è¯¯"
  echo "2. ä¿®å¤æ‰€æœ‰TypeScriptç±»å‹é”™è¯¯"
  echo "3. ç¡®ä¿ä»£ç ç¬¦åˆé¡¹ç›®ç±»å‹å®‰å…¨æ ‡å‡†"
  echo ""
  echo "ğŸ’¡ å¦‚éœ€è·³è¿‡æ­¤æ£€æŸ¥ï¼ˆä¸æ¨èï¼‰:"
  echo "   git commit --no-verify"
  exit 1
fi

echo ""
echo "âœ… TypeScript è´¨é‡æ£€æŸ¥é€šè¿‡!"
echo "ğŸ‰ ä»£ç å¯ä»¥å®‰å…¨æäº¤"