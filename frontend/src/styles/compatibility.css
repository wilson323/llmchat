/* CSS兼容性修复 */

/* 1. text-size-adjust 兼容性修复 - 移除已废弃的-webkit前缀 */
.text-size-adjust-none {
  text-size-adjust: none;
}

.text-size-adjust-auto {
  text-size-adjust: auto;
}

/* 全局应用text-size-adjust */
body {
  text-size-adjust: 100%;
}

/* 2. backdrop-filter 兼容性修复 - webkit前缀必须在前 */
.backdrop-blur-xl {
  -webkit-backdrop-filter: blur(24px);
  backdrop-filter: blur(24px);
}

.backdrop-blur-sm {
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
}

/* 通用backdrop-filter类 */
.backdrop-blur {
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

/* 3. scrollbar 兼容性修复 */
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: rgb(156 163 175) transparent;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: rgb(156 163 175);
  border-radius: 3px;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: rgb(107 114 128);
}

/* 4. 移除不必要的XSS保护头 */
/* 这个需要在服务器端配置中移除 x-xss-protection 头 */

/* 5. 修复content-type问题 */
/* 这个需要在Vite配置中修复 */

/* 6. 辅助功能改进 */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* 7. 焦点可见性改进 */
.focus-visible-ring {
  outline: 2px solid transparent;
  outline-offset: 2px;
}

.focus-visible-ring:focus-visible {
  outline: 2px solid rgb(37 99 235);
  outline-offset: 2px;
}

/* 8. 高对比度模式支持 */
@media (prefers-contrast: high) {
  .high-contrast-border {
    border-color: currentColor;
  }
  
  .high-contrast-text {
    color: currentColor;
  }
}

/* 9. 减少动画偏好支持 */
@media (prefers-reduced-motion: reduce) {
  .motion-reduce-none {
    animation: none !important;
    transition: none !important;
  }
  
  .motion-reduce-transform {
    transform: none !important;
  }
}

/* 10. 暗色模式改进 */
@media (prefers-color-scheme: dark) {
  .dark-auto {
    color-scheme: dark;
  }
}

@media (prefers-color-scheme: light) {
  .light-auto {
    color-scheme: light;
  }
}
