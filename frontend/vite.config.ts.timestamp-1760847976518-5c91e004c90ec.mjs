// vite.config.ts
import { defineConfig } from "file:///mnt/f/ss/aa/sssss/llmchat/node_modules/.pnpm/vite@5.4.20_@types+node@20.19.22_terser@5.44.0/node_modules/vite/dist/node/index.js";
import react from "file:///mnt/f/ss/aa/sssss/llmchat/node_modules/.pnpm/@vitejs+plugin-react@4.7.0_vite@5.4.20/node_modules/@vitejs/plugin-react/dist/index.js";
import { resolve } from "path";
var __vite_injected_original_dirname = "/mnt/f/ss/aa/sssss/llmchat/frontend";
var vite_config_default = defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      "@": resolve(__vite_injected_original_dirname, "src")
    }
  },
  build: {
    // 极简rollup配置 - 避免平台特定依赖问题
    rollupOptions: {
      // 禁用所有可能导致依赖问题的功能
      treeshake: false,
      onwarn: (warning, warn) => {
        if (warning.code === "MODULE_LEVEL_DIRECTIVE") return;
        warn(warning);
      },
      output: {
        // 最简单的输出配置
        manualChunks: void 0,
        chunkFileNames: "[name].js",
        entryFileNames: "[name].js",
        assetFileNames: "[name].[ext]",
        // 简化文件名避免特殊字符
        sanitizeFileName: (name) => name.replace(/[^a-zA-Z0-9.-]/g, "_")
      }
    },
    // 禁用所有可能触发复杂依赖的功能
    minify: false,
    sourcemap: false,
    target: "es2015",
    // 构建性能优化
    chunkSizeWarningLimit: 5e3,
    assetsInlineLimit: 0,
    // 强制使用内存文件系统，避免WSL2文件系统问题
    emptyOutDir: true,
    // 依赖优化 - 正确处理CommonJS模块
    commonjsOptions: {
      include: [/node_modules/],
      transformMixedEsModules: true
    }
  },
  // 简化开发服务器配置 - 使用动态检测的后端端口
  server: {
    port: 3004,
    host: true,
    proxy: {
      "/api": {
        target: "http://localhost:3005",
        changeOrigin: true,
        secure: false
      }
    }
  },
  // 依赖优化配置 - 避免平台特定问题
  optimizeDeps: {
    include: [
      "react",
      "react-dom",
      "react-router-dom",
      "zustand",
      "lucide-react",
      "date-fns"
    ],
    exclude: [
      // 排除可能导致问题的依赖
      "three",
      "@react-three/fiber",
      "@react-three/drei"
    ],
    force: true
  },
  // 环境变量配置
  define: {
    __WSL_BUILD__: "true",
    __BACKEND_PORT__: "3005"
  },
  // 实验性功能 - 提高WSL2兼容性
  experimental: {
    renderBuiltUrl: (filename) => {
      return filename;
    }
  }
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvbW50L2Yvc3MvYWEvc3Nzc3MvbGxtY2hhdC9mcm9udGVuZFwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL21udC9mL3NzL2FhL3Nzc3NzL2xsbWNoYXQvZnJvbnRlbmQvdml0ZS5jb25maWcudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL21udC9mL3NzL2FhL3Nzc3NzL2xsbWNoYXQvZnJvbnRlbmQvdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBkZWZpbmVDb25maWcgfSBmcm9tICd2aXRlJ1xuaW1wb3J0IHJlYWN0IGZyb20gJ0B2aXRlanMvcGx1Z2luLXJlYWN0J1xuaW1wb3J0IHsgcmVzb2x2ZSB9IGZyb20gJ3BhdGgnXG5cbi8vIFdTTDJcdTczQUZcdTU4ODNcdTRFMTNcdTc1MjhcdTY3MDBcdTVDMEZcdTUzMTZcdTkxNERcdTdGNkUgLSBcdTg5RTNcdTUxQjNyb2xsdXBcdTRGOURcdThENTZcdTk1RUVcdTk4OThcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbmZpZyh7XG4gIHBsdWdpbnM6IFtyZWFjdCgpXSxcblxuICByZXNvbHZlOiB7XG4gICAgYWxpYXM6IHtcbiAgICAgICdAJzogcmVzb2x2ZShfX2Rpcm5hbWUsICdzcmMnKSxcbiAgICB9LFxuICB9LFxuXG4gIGJ1aWxkOiB7XG4gICAgLy8gXHU2NzgxXHU3Qjgwcm9sbHVwXHU5MTREXHU3RjZFIC0gXHU5MDdGXHU1MTREXHU1RTczXHU1M0YwXHU3Mjc5XHU1QjlBXHU0RjlEXHU4RDU2XHU5NUVFXHU5ODk4XG4gICAgcm9sbHVwT3B0aW9uczoge1xuICAgICAgLy8gXHU3OTgxXHU3NTI4XHU2MjQwXHU2NzA5XHU1M0VGXHU4MEZEXHU1QkZDXHU4MUY0XHU0RjlEXHU4RDU2XHU5NUVFXHU5ODk4XHU3Njg0XHU1MjlGXHU4MEZEXG4gICAgICB0cmVlc2hha2U6IGZhbHNlLFxuICAgICAgb253YXJuOiAod2FybmluZywgd2FybikgPT4ge1xuICAgICAgICAvLyBcdTVGRkRcdTc1NjVcdTYyNDBcdTY3MDlcdThCNjZcdTU0NEFcdUZGMENcdTkwN0ZcdTUxNERcdTRGOURcdThENTZcdTg5RTNcdTY3OTBcdTk1RUVcdTk4OThcbiAgICAgICAgaWYgKHdhcm5pbmcuY29kZSA9PT0gJ01PRFVMRV9MRVZFTF9ESVJFQ1RJVkUnKSByZXR1cm47XG4gICAgICAgIHdhcm4od2FybmluZyk7XG4gICAgICB9LFxuICAgICAgb3V0cHV0OiB7XG4gICAgICAgIC8vIFx1NjcwMFx1N0I4MFx1NTM1NVx1NzY4NFx1OEY5M1x1NTFGQVx1OTE0RFx1N0Y2RVxuICAgICAgICBtYW51YWxDaHVua3M6IHVuZGVmaW5lZCxcbiAgICAgICAgY2h1bmtGaWxlTmFtZXM6ICdbbmFtZV0uanMnLFxuICAgICAgICBlbnRyeUZpbGVOYW1lczogJ1tuYW1lXS5qcycsXG4gICAgICAgIGFzc2V0RmlsZU5hbWVzOiAnW25hbWVdLltleHRdJyxcbiAgICAgICAgLy8gXHU3QjgwXHU1MzE2XHU2NTg3XHU0RUY2XHU1NDBEXHU5MDdGXHU1MTREXHU3Mjc5XHU2QjhBXHU1QjU3XHU3QjI2XG4gICAgICAgIHNhbml0aXplRmlsZU5hbWU6IChuYW1lKSA9PiBuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05Li1dL2csICdfJylcbiAgICAgIH0sXG4gICAgfSxcblxuICAgIC8vIFx1Nzk4MVx1NzUyOFx1NjI0MFx1NjcwOVx1NTNFRlx1ODBGRFx1ODlFNlx1NTNEMVx1NTkwRFx1Njc0Mlx1NEY5RFx1OEQ1Nlx1NzY4NFx1NTI5Rlx1ODBGRFxuICAgIG1pbmlmeTogZmFsc2UsXG4gICAgc291cmNlbWFwOiBmYWxzZSxcbiAgICB0YXJnZXQ6ICdlczIwMTUnLFxuXG4gICAgLy8gXHU2Nzg0XHU1RUZBXHU2MDI3XHU4MEZEXHU0RjE4XHU1MzE2XG4gICAgY2h1bmtTaXplV2FybmluZ0xpbWl0OiA1MDAwLFxuICAgIGFzc2V0c0lubGluZUxpbWl0OiAwLFxuXG4gICAgLy8gXHU1RjNBXHU1MjM2XHU0RjdGXHU3NTI4XHU1MTg1XHU1QjU4XHU2NTg3XHU0RUY2XHU3Q0ZCXHU3RURGXHVGRjBDXHU5MDdGXHU1MTREV1NMMlx1NjU4N1x1NEVGNlx1N0NGQlx1N0VERlx1OTVFRVx1OTg5OFxuICAgIGVtcHR5T3V0RGlyOiB0cnVlLFxuXG4gICAgLy8gXHU0RjlEXHU4RDU2XHU0RjE4XHU1MzE2IC0gXHU2QjYzXHU3ODZFXHU1OTA0XHU3NDA2Q29tbW9uSlNcdTZBMjFcdTU3NTdcbiAgICBjb21tb25qc09wdGlvbnM6IHtcbiAgICAgIGluY2x1ZGU6IFsvbm9kZV9tb2R1bGVzL10sXG4gICAgICB0cmFuc2Zvcm1NaXhlZEVzTW9kdWxlczogdHJ1ZVxuICAgIH0sXG4gIH0sXG5cbiAgLy8gXHU3QjgwXHU1MzE2XHU1RjAwXHU1M0QxXHU2NzBEXHU1MkExXHU1NjY4XHU5MTREXHU3RjZFIC0gXHU0RjdGXHU3NTI4XHU1MkE4XHU2MDAxXHU2OEMwXHU2RDRCXHU3Njg0XHU1NDBFXHU3QUVGXHU3QUVGXHU1M0UzXG4gIHNlcnZlcjoge1xuICAgIHBvcnQ6IDMwMDQsXG4gICAgaG9zdDogdHJ1ZSxcbiAgICBwcm94eToge1xuICAgICAgJy9hcGknOiB7XG4gICAgICAgIHRhcmdldDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwNScsXG4gICAgICAgIGNoYW5nZU9yaWdpbjogdHJ1ZSxcbiAgICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLy8gXHU0RjlEXHU4RDU2XHU0RjE4XHU1MzE2XHU5MTREXHU3RjZFIC0gXHU5MDdGXHU1MTREXHU1RTczXHU1M0YwXHU3Mjc5XHU1QjlBXHU5NUVFXHU5ODk4XG4gIG9wdGltaXplRGVwczoge1xuICAgIGluY2x1ZGU6IFtcbiAgICAgICdyZWFjdCcsXG4gICAgICAncmVhY3QtZG9tJyxcbiAgICAgICdyZWFjdC1yb3V0ZXItZG9tJyxcbiAgICAgICd6dXN0YW5kJyxcbiAgICAgICdsdWNpZGUtcmVhY3QnLFxuICAgICAgJ2RhdGUtZm5zJ1xuICAgIF0sXG4gICAgZXhjbHVkZTogW1xuICAgICAgLy8gXHU2MzkyXHU5NjY0XHU1M0VGXHU4MEZEXHU1QkZDXHU4MUY0XHU5NUVFXHU5ODk4XHU3Njg0XHU0RjlEXHU4RDU2XG4gICAgICAndGhyZWUnLFxuICAgICAgJ0ByZWFjdC10aHJlZS9maWJlcicsXG4gICAgICAnQHJlYWN0LXRocmVlL2RyZWknXG4gICAgXSxcbiAgICBmb3JjZTogdHJ1ZSxcbiAgfSxcblxuICAvLyBcdTczQUZcdTU4ODNcdTUzRDhcdTkxQ0ZcdTkxNERcdTdGNkVcbiAgZGVmaW5lOiB7XG4gICAgX19XU0xfQlVJTERfXzogJ3RydWUnLFxuICAgIF9fQkFDS0VORF9QT1JUX186ICczMDA1J1xuICB9LFxuXG4gIC8vIFx1NUI5RVx1OUE4Q1x1NjAyN1x1NTI5Rlx1ODBGRCAtIFx1NjNEMFx1OUFEOFdTTDJcdTUxN0NcdTVCQjlcdTYwMjdcbiAgZXhwZXJpbWVudGFsOiB7XG4gICAgcmVuZGVyQnVpbHRVcmw6IChmaWxlbmFtZSkgPT4ge1xuICAgICAgcmV0dXJuIGZpbGVuYW1lO1xuICAgIH1cbiAgfVxufSlcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBMlIsU0FBUyxvQkFBb0I7QUFDeFQsT0FBTyxXQUFXO0FBQ2xCLFNBQVMsZUFBZTtBQUZ4QixJQUFNLG1DQUFtQztBQUt6QyxJQUFPLHNCQUFRLGFBQWE7QUFBQSxFQUMxQixTQUFTLENBQUMsTUFBTSxDQUFDO0FBQUEsRUFFakIsU0FBUztBQUFBLElBQ1AsT0FBTztBQUFBLE1BQ0wsS0FBSyxRQUFRLGtDQUFXLEtBQUs7QUFBQSxJQUMvQjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLE9BQU87QUFBQTtBQUFBLElBRUwsZUFBZTtBQUFBO0FBQUEsTUFFYixXQUFXO0FBQUEsTUFDWCxRQUFRLENBQUMsU0FBUyxTQUFTO0FBRXpCLFlBQUksUUFBUSxTQUFTLHlCQUEwQjtBQUMvQyxhQUFLLE9BQU87QUFBQSxNQUNkO0FBQUEsTUFDQSxRQUFRO0FBQUE7QUFBQSxRQUVOLGNBQWM7QUFBQSxRQUNkLGdCQUFnQjtBQUFBLFFBQ2hCLGdCQUFnQjtBQUFBLFFBQ2hCLGdCQUFnQjtBQUFBO0FBQUEsUUFFaEIsa0JBQWtCLENBQUMsU0FBUyxLQUFLLFFBQVEsbUJBQW1CLEdBQUc7QUFBQSxNQUNqRTtBQUFBLElBQ0Y7QUFBQTtBQUFBLElBR0EsUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLElBQ1gsUUFBUTtBQUFBO0FBQUEsSUFHUix1QkFBdUI7QUFBQSxJQUN2QixtQkFBbUI7QUFBQTtBQUFBLElBR25CLGFBQWE7QUFBQTtBQUFBLElBR2IsaUJBQWlCO0FBQUEsTUFDZixTQUFTLENBQUMsY0FBYztBQUFBLE1BQ3hCLHlCQUF5QjtBQUFBLElBQzNCO0FBQUEsRUFDRjtBQUFBO0FBQUEsRUFHQSxRQUFRO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixPQUFPO0FBQUEsTUFDTCxRQUFRO0FBQUEsUUFDTixRQUFRO0FBQUEsUUFDUixjQUFjO0FBQUEsUUFDZCxRQUFRO0FBQUEsTUFDVjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUE7QUFBQSxFQUdBLGNBQWM7QUFBQSxJQUNaLFNBQVM7QUFBQSxNQUNQO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNGO0FBQUEsSUFDQSxTQUFTO0FBQUE7QUFBQSxNQUVQO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNGO0FBQUEsSUFDQSxPQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUEsRUFHQSxRQUFRO0FBQUEsSUFDTixlQUFlO0FBQUEsSUFDZixrQkFBa0I7QUFBQSxFQUNwQjtBQUFBO0FBQUEsRUFHQSxjQUFjO0FBQUEsSUFDWixnQkFBZ0IsQ0FBQyxhQUFhO0FBQzVCLGFBQU87QUFBQSxJQUNUO0FBQUEsRUFDRjtBQUNGLENBQUM7IiwKICAibmFtZXMiOiBbXQp9Cg==
