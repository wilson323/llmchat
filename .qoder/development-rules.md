# Qoderå¼€å‘è§„åˆ™ - Speckité›†æˆç‰ˆ

## ğŸ“‹ æ ¸å¿ƒå¼€å‘åŸåˆ™

### 1. TypeScriptæ¶æ„è§„èŒƒ

**å•ä¸€çœŸç†æºåŸåˆ™**ï¼š

- âœ… `ui.types.ts` - UIç»„ä»¶ç±»å‹çš„å”¯ä¸€æƒå¨æº
- âœ… `types.unified.ts` - ä»…ä½œè½¬å‘å±‚ï¼Œä¸å®šä¹‰æ–°ç±»å‹
- âŒ ç¦æ­¢åˆ›å»ºå†—ä½™types.tsã€\*.backupæ–‡ä»¶
- âŒ ç¦æ­¢ç»„ä»¶å†…éƒ¨é‡å¤å®šä¹‰æ¥å£

**ç±»å‹/å€¼ä¸¥æ ¼åˆ†ç¦»**ï¼š

```typescript
// âœ… æ­£ç¡®
export type { ButtonProps, CardProps } from './ui.types';
export { Button, Card } from './components';

// âŒ é”™è¯¯
export { ButtonProps } from './ui.types'; // Interfaceç”¨export type
export type { Button } from './components'; // Classç”¨export
```

**é›¶å®¹å¿ç±»å‹é”™è¯¯æ”¿ç­–**ï¼š

- ğŸ”´ **ä¸¥ç¦**ä»»ä½• TypeScript ç¼–è¯‘é”™è¯¯è¿›å…¥ä¸»åˆ†æ”¯
- ğŸ”´ **ä¸¥ç¦**ä½¿ç”¨ `any` ç±»å‹ï¼Œå¿…é¡»ä½¿ç”¨æ˜ç¡®çš„ç±»å‹å®šä¹‰
- ğŸ”´ **ä¸¥ç¦**ç»•è¿‡ TypeScript ç±»å‹æ£€æŸ¥ï¼ˆå¦‚ `@ts-ignore`ï¼‰

### 2. P0é”™è¯¯é›¶å®¹å¿æ”¿ç­–

**ç«‹å³ä¿®å¤çš„é”™è¯¯ç±»å‹**ï¼š

- TS2484 - é‡å¤å¯¼å‡ºå†²çª
- TS2323 - é‡å¤å£°æ˜
- TS1361 - ç±»å‹/å€¼æ··ç”¨
- TS1205 - isolatedModulesé”™è¯¯

**ä¿®å¤æµç¨‹**ï¼š

1. è¯†åˆ«P0é”™è¯¯ â†’ ç«‹å³åœæ­¢å…¶ä»–å·¥ä½œ
2. æ ¹æœ¬åŸå› åˆ†æ â†’ æŸ¥çœ‹TYPESCRIPT_ARCHITECTURE_STANDARDS.md
3. æ¶æ„å±‚é¢ä¿®å¤ â†’ ä¸æ˜¯è¡¨é¢ä¿®å¤
4. éªŒè¯ç¼–è¯‘é€šè¿‡ â†’ ç¡®ä¿é›¶é”™è¯¯

### 3. UIç»„ä»¶å¼€å‘è§„èŒƒ

**å¤åˆç»„ä»¶æ¨¡å¼**ï¼š

```typescript
// âœ… æ­£ç¡®ï¼šå­ç»„ä»¶é™„åŠ æ¨¡å¼
const Card = attachSubComponents(CardImpl, {
  Header: createSubComponent('Card.Header', CardHeader),
  Title: createSubComponent('Card.Title', CardTitle),
  Content: createSubComponent('Card.Content', CardContent),
});

export default Card;

// âœ… æ­£ç¡®ï¼šä½¿ç”¨æ–¹å¼
import Card from '@/components/ui/Card';
<Card>
  <Card.Header>
    <Card.Title>æ ‡é¢˜</Card.Title>
  </Card.Header>
  <Card.Content>å†…å®¹</Card.Content>
</Card>

// âŒ é”™è¯¯ï¼šNamed import
import { CardHeader, CardTitle } from '@/components/ui/Card';
```

### 4. äº‹ä»¶å¤„ç†å™¨ç»Ÿä¸€è§„èŒƒ

**æƒå¨ç±»å‹å®šä¹‰**ï¼š

```typescript
// ä»æƒå¨æ–‡ä»¶å¯¼å…¥
import {
  ChangeEventHandler,
  ClickEventHandler,
  adaptEventHandler,
} from '@/types/event-handlers';

interface MyComponentProps {
  onChange?: ChangeEventHandler<string>;
  onClick?: ClickEventHandler<void>;
}
```

### 5. ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–åŸåˆ™ (YAGNI)

**You Aren't Gonna Need It**ï¼š

- âŒ åˆ é™¤å¼€å‘ä¸“ç”¨åŠŸèƒ½ï¼šå¤æ‚å›¾è¡¨ã€æ€§èƒ½åŸºå‡†æµ‹è¯•ã€æ¼”ç¤ºä»£ç 
- âŒ ç§»é™¤è¿‡åº¦å·¥ç¨‹åŒ–ï¼šå¤æ‚éªŒè¯å™¨å·¥å‚ã€ç±»å‹ç³»ç»ŸæŠ½è±¡
- âœ… ä¿ç•™æ ¸å¿ƒåŠŸèƒ½ï¼šåŸºç¡€ç›‘æ§ã€æ ¸å¿ƒUIç»„ä»¶ã€ä¸šåŠ¡é€»è¾‘

### 6. ä¼ä¸šçº§ä»£ç å®‰å…¨å‡†åˆ™

**ä¸¥æ ¼ç¦æ­¢çš„å±é™©æ“ä½œ**ï¼š

- âŒ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢ä»£ç  - ç»å¯¹ç¦æ­¢ä½¿ç”¨ `.replace(/regex/, replacement)`
  ä¿®æ”¹æºä»£ç 
- âŒ åŠ¨æ€æ„é€ æ­£åˆ™è¡¨è¾¾å¼ - ç»å¯¹ç¦æ­¢ `new RegExp(userInput)` ç”¨äºä»£ç å¤„ç†
- âŒ ä½¿ç”¨sed/awkè¿›è¡Œä»£ç ä¿®æ”¹ - ç»å¯¹ç¦æ­¢ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·ä¿®æ”¹ä»£ç æ–‡ä»¶
- âŒ ä½¿ç”¨å­—ç¬¦ä¸²æ›¿æ¢ä¿®æ”¹ç»“æ„åŒ–æ•°æ® - å¿…é¡»ä½¿ç”¨ä¸“é—¨çš„è§£æå™¨
- âŒ ä¼ä¸šçº§è‡ªåŠ¨ä¿®å¤ - æ‰€æœ‰ä¿®å¤å¿…é¡»ç»è¿‡å½±å“åˆ†æå’Œäººå·¥ç¡®è®¤
- âŒ è„šæœ¬æ‰¹é‡ä¿®æ”¹ä»£ç  - ç»å¯¹ç¦æ­¢é€šè¿‡ä»»ä½•è„šæœ¬å·¥å…·æ‰¹é‡ä¿®æ”¹æºä»£ç ï¼Œæ‰€æœ‰ä»£ç ä¿®æ”¹å¿…é¡»æ‰‹åŠ¨è¿›è¡Œ

**ä¼ä¸šçº§å®‰å…¨æ›¿ä»£æ–¹æ¡ˆ**ï¼š

- âœ… ASTä¼˜å…ˆä¿®å¤: ä½¿ç”¨TypeScriptç¼–è¯‘å™¨APIè¿›è¡Œç²¾ç¡®çš„ASTæ“ä½œ
- âœ… ç±»å‹å®‰å…¨ä¿®å¤: ä½¿ç”¨ä¸“é—¨çš„ç±»å‹æ£€æŸ¥å’Œä¿®å¤å·¥å…·
- âœ… é…ç½®æ–‡ä»¶: ä½¿ç”¨ä¸“é—¨çš„é…ç½®è§£æåº“ï¼ˆå¦‚dotenvã€configç­‰ï¼‰
- âœ… ä»£ç é‡æ„: ä½¿ç”¨ä¼ä¸šçº§ASTè§£æå™¨è¿›è¡Œä»£ç å˜æ¢
- âœ… æ–‡æœ¬å¤„ç†: ä»…é™ç”¨äºæ—¥å¿—å¤„ç†å’Œæ•°æ®æ¸…ç†ï¼Œä¸ç”¨äºä»£ç ä¿®æ”¹
- âœ… æ‰‹åŠ¨ä»£ç ä¿®æ”¹åŸåˆ™: æ‰€æœ‰æºä»£ç ä¿®æ”¹å¿…é¡»é€šè¿‡æ‰‹åŠ¨ç¼–è¾‘è¿›è¡Œï¼Œç¡®ä¿æ¯æ¬¡ä¿®æ”¹éƒ½ç»è¿‡å……åˆ†çš„äººå·¥å®¡æŸ¥å’ŒéªŒè¯

## ğŸ§ª Speckitè§„èŒƒé›†æˆ

### 1. æ–‡æ¡£èŒè´£è¾¹ç•Œ (éµå¾ª.specify/standards/document-structure.md)

**éœ€æ±‚æ–‡æ¡£ (requirements.md)**:

- èŒè´£: WHATï¼ˆåšä»€ä¹ˆï¼‰
- å†…å®¹: åŠŸèƒ½éœ€æ±‚(FR-xxx)ã€éåŠŸèƒ½éœ€æ±‚(NFR-xxx)ã€ç”¨æˆ·æ•…äº‹(US-xxx)
- ç¦æ­¢: å®ç°ç»†èŠ‚ã€å·¥å…·é€‰æ‹©ã€ä»»åŠ¡åˆ†è§£

**è®¾è®¡æ–‡æ¡£ (design.md)**:

- èŒè´£: HOWï¼ˆæ€ä¹ˆåšï¼‰
- å†…å®¹: ç³»ç»Ÿæ¶æ„å›¾ã€æ¨¡å—è®¾è®¡ã€æ¥å£å®šä¹‰ã€æŠ€æœ¯é€‰å‹ç†ç”±
- ç¦æ­¢: éœ€æ±‚æè¿°ã€ä»»åŠ¡æ¸…å•

**ä»»åŠ¡æ–‡æ¡£ (tasks.md)**:

- èŒè´£: WHO + WHENï¼ˆè°åšã€ä½•æ—¶åšï¼‰
- å†…å®¹: ä»»åŠ¡åˆ†è§£ã€ä¾èµ–å…³ç³»ã€æ—¶é—´ä¼°ç®—ã€ä¼˜å…ˆçº§
- ç¦æ­¢: éœ€æ±‚å®šä¹‰ã€æŠ€æœ¯å®ç°ç»†èŠ‚

### 2. å•ä¸€çœŸå®æ¥æºåŸåˆ™ (éµå¾ª.specify/standards/ssot-index.md)

**æŠ€æœ¯ç»†èŠ‚æ–‡æ¡£ (technical-details.md)**:

- èŒè´£: æŠ€æœ¯å‚æ•°çš„æƒå¨å®šä¹‰
- å†…å®¹: JWTé…ç½®ã€å¯†ç å“ˆå¸Œå‚æ•°ã€æ•°æ®åº“è¿æ¥å‚æ•°ã€ç¼“å­˜TTLé…ç½®
- å¼•ç”¨æ–¹å¼: å…¶ä»–æ–‡æ¡£ä½¿ç”¨`[è¯¦è§æŠ€æœ¯è§„èŒƒ](technical-details.md#section)`

**æœ¯è¯­è¡¨æ–‡æ¡£ (terminology.md)**:

- èŒè´£: æœ¯è¯­çš„æƒå¨å®šä¹‰
- å†…å®¹: ä¸­è‹±æœ¯è¯­å¯¹ç…§è¡¨ã€ä»£ç å‘½åè§„èŒƒã€çŠ¶æ€æœ¯è¯­å®šä¹‰
- å¼•ç”¨æ–¹å¼: æ–‡æ¡£é¦–æ¬¡ä½¿ç”¨æœ¯è¯­æ—¶å¼•ç”¨æ­¤è¡¨

**é”™è¯¯ä»£ç æ–‡æ¡£ (api-error-codes.md)**:

- èŒè´£: é”™è¯¯ä»£ç çš„æƒå¨å®šä¹‰
- å†…å®¹: é”™è¯¯å“åº”æ ¼å¼ã€HTTPçŠ¶æ€ç æ˜ å°„ã€é”™è¯¯ä»£ç æ¸…å•
- å¼•ç”¨æ–¹å¼: ä»£ç ä¸­ä½¿ç”¨é”™è¯¯ä»£ç æ—¶å‚è€ƒæ­¤æ–‡æ¡£

### 3. æ–‡æ¡£åŒæ­¥è§„åˆ™

**å˜æ›´å½±å“çŸ©é˜µ**: | ä¿®æ”¹æ–‡æ¡£ | å¿…é¡»æ£€æŸ¥ | åŸå›  | |---------|---------|------| |
requirements.md | design.md, tasks.md | éœ€æ±‚å˜æ›´å½±å“è®¾è®¡å’Œä»»åŠ¡ | | design.md |
tasks.md | è®¾è®¡è°ƒæ•´å¯èƒ½æ”¹å˜ä»»åŠ¡åˆ†è§£ | | technical-details.md
| æ‰€æœ‰å¼•ç”¨å®ƒçš„æ–‡æ¡£ | æŠ€æœ¯å‚æ•°æ˜¯å•ä¸€æ¥æº | | terminology.md
| æ‰€æœ‰æ–‡æ¡£ | æœ¯è¯­å˜æ›´å½±å“å…¨å±€ |

**åŒæ­¥æ£€æŸ¥ç‚¹**:

1. éœ€æ±‚ç¡®è®¤å: requirements.mdå®Œæˆ, design.mdè®¾è®¡å¯¹é½, tasks.mdè¦†ç›–100%éœ€æ±‚
2. è®¾è®¡è¯„å®¡å: design.mdé”å®š,
   tasks.mdä¾èµ–å…³ç³»æ˜ç¡®, æŠ€æœ¯é€‰å‹å†™å…¥technical-details.md
3. å¼€å‘å¼€å§‹å‰: æ‰€æœ‰æ–‡æ¡£ç‰ˆæœ¬å·åŒæ­¥, æ‰€æœ‰å¼•ç”¨é“¾æ¥æœ‰æ•ˆ, è¿è¡Œè‡ªåŠ¨åŒ–éªŒè¯å·¥å…·

## ğŸš€ å¼€å‘å·¥ä½œæµ

### ä»£ç æäº¤å‰æ£€æŸ¥æ¸…å•

#### ç±»å‹å®‰å…¨æ£€æŸ¥

- [ ] TypeScriptç¼–è¯‘æ— é”™è¯¯ (`pnpm run type-check`)
- [ ] ESLintæ£€æŸ¥é€šè¿‡ (`pnpm run lint`)
- [ ] æ— P0æ¶æ„é”™è¯¯

#### æ¶æ„åˆè§„æ£€æŸ¥

- [ ] æ— å†—ä½™ç±»å‹æ–‡ä»¶
- [ ] ç±»å‹/å€¼æ­£ç¡®åˆ†ç¦»
- [ ] å¤åˆç»„ä»¶ä½¿ç”¨default export
- [ ] äº‹ä»¶å¤„ç†å™¨ä»æƒå¨å®šä¹‰å¯¼å…¥

#### Speckitæ–‡æ¡£åˆè§„æ£€æŸ¥

- [ ] éœ€æ±‚ã€è®¾è®¡ã€ä»»åŠ¡æ–‡æ¡£èŒè´£åˆ†ç¦»æ¸…æ™°
- [ ] æŠ€æœ¯ç»†èŠ‚åœ¨technical-details.mdä¸­å®šä¹‰
- [ ] æœ¯è¯­åœ¨terminology.mdä¸­å®šä¹‰
- [ ] é”™è¯¯ä»£ç åœ¨api-error-codes.mdä¸­å®šä¹‰
- [ ] æ‰€æœ‰å¼•ç”¨é“¾æ¥æœ‰æ•ˆ

#### ä¼ä¸šçº§å®‰å…¨æ£€æŸ¥

- [ ] æ— æ­£åˆ™è¡¨è¾¾å¼ä»£ç æ›¿æ¢
- [ ] æ— åŠ¨æ€æ„é€ æ­£åˆ™è¡¨è¾¾å¼
- [ ] æ— sed/awkä»£ç ä¿®æ”¹
- [ ] æ— è„šæœ¬æ‰¹é‡ä¿®æ”¹ä»£ç 
- [ ] æ‰€æœ‰ä»£ç ä¿®æ”¹å‡ä¸ºæ‰‹åŠ¨è¿›è¡Œ

#### åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥

- [ ] æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½æ­£å¸¸
- [ ] UIç»„ä»¶æ¸²æŸ“æ­£ç¡®
- [ ] æ— å¼€å‘ä¸“ç”¨ä»£ç æ³„éœ²

### è‡ªåŠ¨åŒ–æ£€æŸ¥å‘½ä»¤

```bash
# æ¯æ—¥å¼€å‘å¿…è¿è¡Œ
pnpm run type-check     # TypeScriptç¼–è¯‘æ£€æŸ¥
pnpm run lint          # ä»£ç è´¨é‡æ£€æŸ¥
pnpm run build         # æ„å»ºéªŒè¯

# Speckitæ–‡æ¡£éªŒè¯
npm run validate:docs:consistency   # ä¸€è‡´æ€§æ£€æŸ¥
npm run validate:docs:coverage      # è¦†ç›–ç‡æ£€æŸ¥
npm run validate:docs:references    # å¼•ç”¨å®Œæ•´æ€§æ£€æŸ¥
npm run validate:docs:ambiguity     # æ¨¡ç³Šæœ¯è¯­æ£€æŸ¥

# ä¼ä¸šçº§å®‰å…¨æ£€æŸ¥
pnpm run security:audit    # å®‰å…¨å®¡è®¡
pnpm run security:check    # æäº¤å‰å®‰å…¨æ£€æŸ¥
pnpm run enterprise:fix    # ä¼ä¸šçº§å®‰å…¨ä»£ç ä¿®å¤å·¥å…·

# æ¶æ„åˆè§„æ£€æŸ¥
find frontend/src -name "*.backup" -o -name "types.ts" | grep -v "ui.types.ts\|types.unified.ts"

# P0é”™è¯¯æ£€æŸ¥
npx tsc --noEmit --skipLibCheck 2>&1 | grep -E "(TS2484|TS2323|TS1361|TS1205)"
```

## ğŸ“š å‚è€ƒæ–‡æ¡£

- **æ¶æ„æ ‡å‡†**: `frontend/TYPESCRIPT_ARCHITECTURE_STANDARDS.md`
- **é¡¹ç›®é…ç½®**: `CLAUDE.md`
- **åŠ¨æ€ç«¯å£**: `scripts/find-backend-port.js`
- **Speckitè§„èŒƒ**: `.specify/standards/`
- **SpeckitéªŒè¯å·¥å…·**: `scripts/spec-validation/`

## âš ï¸ é‡è¦æé†’

1. **ç¦æ­¢æ²»æ ‡ä¸æ²»æœ¬** - å¿…é¡»ä»æ¶æ„å±‚é¢è§£å†³é—®é¢˜
2. **ä¸¥æ ¼éµå¾ªè§„èŒƒ** - ä¸å…è®¸åç¦»TYPESCRIPT_ARCHITECTURE_STANDARDS.md
3. **é›¶é”™è¯¯æ”¿ç­–** - P0é”™è¯¯å¿…é¡»ç«‹å³ä¿®å¤
4. **YAGNIåŸåˆ™** - é¿å…è¿‡åº¦å·¥ç¨‹åŒ–ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½
5. **Speckitåˆè§„** - ä¸¥æ ¼éµå¾ªæ–‡æ¡£èŒè´£è¾¹ç•Œå’Œå•ä¸€çœŸå®æ¥æºåŸåˆ™
6. **ä¼ä¸šçº§å®‰å…¨** - ä¸¥æ ¼éµå®ˆä¼ä¸šçº§ä»£ç å®‰å…¨å‡†åˆ™ï¼Œç¦æ­¢å±é™©æ“ä½œ

---

**ç‰ˆæœ¬**: v1.0.0 **åˆ›å»ºæ—¥æœŸ**: 2025-10-19 **ç»´æŠ¤è€…**: LLMChatå¼€å‘å›¢é˜Ÿ
