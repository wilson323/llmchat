# 快速入门

<cite>
**本文档中引用的文件**  
- [model-switching-feature.md](file://doc/model-switching-feature.md)
</cite>

## 目录
1. [简介](#简介)
2. [开发环境准备](#开发环境准备)
3. [项目初始化与依赖安装](#项目初始化与依赖安装)
4. [环境变量配置](#环境变量配置)
5. [启动前后端服务](#启动前后端服务)
6. [最小化运行示例](#最小化运行示例)
7. [常见初始化问题及解决方案](#常见初始化问题及解决方案)
8. [推荐开发工具与配置](#推荐开发工具与配置)
9. [核心功能理解建议](#核心功能理解建议)

## 简介

本指南旨在帮助新开发者快速搭建 `llmchat` 项目的本地开发环境。通过本指南，您将能够完成 Node.js 与 TypeScript 的配置、项目克隆、依赖安装、环境变量设置，并成功启动前后端服务。同时，本文档提供了一个最小化运行示例，演示如何进行智能体切换和聊天交互。此外，还列出了常见的初始化问题及其解决方案，确保开发流程顺畅。

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L1-L50)

## 开发环境准备

在开始之前，请确保您的开发机器已安装以下基础工具：

- **Node.js**：建议使用 v18.x 或更高版本。可通过 [Node.js 官网](https://nodejs.org/) 下载并安装。
- **npm**：通常随 Node.js 一起安装，用于包管理。
- **TypeScript**：全局安装 `typescript` 和 `ts-node`，便于本地运行 TypeScript 文件。

安装命令如下：
```bash
npm install -g typescript ts-node
```

验证安装是否成功：
```bash
node --version
npm --version
tsc --version
```

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L1-L50)

## 项目初始化与依赖安装

1. 克隆项目仓库到本地：
   ```bash
   git clone https://github.com/your-repo/llmchat.git
   cd llmchat
   ```

2. 安装项目依赖：
   ```bash
   npm install
   ```

   此命令将根据 `package.json` 文件自动安装所有必要的依赖项，包括前端框架、后端服务组件、TypeScript 编译器及相关插件。

3. 检查项目结构是否完整，关键目录包括：
   - `src/`：源码目录
   - `doc/`：文档目录（含 `model-switching-feature.md`）
   - `config/`：配置文件目录（如存在）

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L1-L50)

## 环境变量配置

项目需要配置 AI 服务的 API 密钥等敏感信息，这些信息应通过环境变量注入，避免硬编码。

1. 在项目根目录创建 `.env` 文件：
   ```bash
   touch .env
   ```

2. 根据 `model-switching-feature.md` 中的配置示例，填写必要的环境变量。例如：

   ```env
   FASTGPT_API_KEY=your_fastgpt_api_key_here
   OPENAI_API_KEY=your_openai_api_key_here
   ANTHROPIC_API_KEY=your_anthropic_api_key_here
   PORT=3000
   NODE_ENV=development
   ```

3. 确保 `.env` 文件已被 `.gitignore` 忽略，防止密钥泄露。

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L500-L600)

## 启动前后端服务

完成依赖安装和环境变量配置后，可启动开发服务器：

1. 启动前后端一体化开发服务：
   ```bash
   npm run dev
   ```

   该命令将同时启动前端开发服务器和后端 API 服务，通常使用 `vite` 或 `webpack` 进行热重载。

2. 浏览器访问应用：
   打开浏览器并导航至 `http://localhost:3000`，确认页面正常加载。

3. 查看控制台输出，确保无错误日志，且服务监听在指定端口。

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L1-L50)

## 最小化运行示例

为验证环境搭建成功，执行一次完整的智能体切换与聊天交互流程：

1. 在聊天界面中，点击“智能体选择器”下拉菜单。
2. 从列表中选择一个智能体（如 `FastGPT 智能助手`）。
3. 输入一条消息，例如：“你好，请介绍一下你自己。”
4. 观察响应内容是否来自所选智能体。
5. 再次切换至另一个智能体（如 `GPT-4 助手`），发送相同消息，验证响应是否变化。

此过程验证了：
- 智能体配置正确加载
- 聊天代理服务正常转发请求
- 不同 AI 提供商的 API 调用成功
- 前后端通信无误

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L1000-L1200)

## 常见初始化问题及解决方案

### 端口冲突
- **现象**：`Error: listen EADDRINUSE: address already in use :::3000`
- **解决方案**：修改 `.env` 文件中的 `PORT` 变量，或终止占用该端口的进程。

### 依赖缺失或版本不兼容
- **现象**：`Module not found` 或 `TypeError`
- **解决方案**：删除 `node_modules` 和 `package-lock.json`，重新运行 `npm install`。

### API 密钥未配置
- **现象**：`401 Unauthorized` 或 `Invalid API Key`
- **解决方案**：检查 `.env` 文件中对应服务的 API 密钥是否正确填写，并确认环境变量已生效。

### TypeScript 编译错误
- **现象**：`TS2307: Cannot find module` 或类型错误
- **解决方案**：确保 `tsconfig.json` 配置正确，必要时运行 `tsc --noEmit` 检查类型问题。

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L1-L50)

## 推荐开发工具与配置

建议使用 **Visual Studio Code (VS Code)** 作为主要开发工具，并进行如下配置：

1. 安装推荐插件：
   - **ESLint**：代码质量检查
   - **Prettier**：代码格式化
   - **TypeScript Hero**：增强 TS 支持
   - **DotENV**：`.env` 文件语法高亮

2. 配置 TypeScript 检查：
   在 `settings.json` 中启用：
   ```json
   "typescript.validate.enable": true,
   "javascript.validate.enable": false
   ```

3. 配置调试器：
   创建 `.vscode/launch.json`，添加 Node.js 调试配置，支持断点调试。

4. 启用路径别名支持：
   在 `jsconfig.json` 或 `tsconfig.json` 中配置 `baseUrl` 和 `paths`，提升导入体验。

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L1-L50)

## 核心功能理解建议

在深入开发前，强烈建议仔细阅读项目文档 `doc/model-switching-feature.md`，重点理解以下内容：

- **智能体切换机制**：了解前端如何通过状态管理切换当前智能体，后端如何路由请求至不同 AI 服务。
- **统一适配器模式**：掌握 `AIProvider` 接口如何抽象不同提供商的差异，实现兼容 OpenAI 标准的 API 调用。
- **流式响应处理**：理解 `ChatProxyService` 如何处理流式数据，特别是 FastGPT 特有的 `flowNodeStatus` 事件。
- **主题系统设计**：学习基于 CSS Variables 的主题切换机制，以及自动模式的时间判断逻辑。

该文档是理解项目架构和核心功能的关键，有助于避免重复造轮子和设计冲突。

**Section sources**
- [model-switching-feature.md](file://doc/model-switching-feature.md#L1-L50)