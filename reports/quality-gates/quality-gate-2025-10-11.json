{
  "timestamp": "2025-10-11T14:10:33.401Z",
  "repository": {
    "remote": "git@github.com:wilson323/llmchat.git",
    "branch": "main",
    "commit": "a713bcbfe4ec3edd296f206a9161a71674376a6a"
  },
  "thresholds": {
    "eslint": {
      "maxErrors": 0,
      "maxWarnings": 10,
      "errorWeight": 10,
      "warningWeight": 2,
      "description": "ESLint代码质量检查阈值"
    },
    "security": {
      "maxCritical": 0,
      "maxHigh": 0,
      "maxModerate": 5,
      "criticalWeight": 50,
      "highWeight": 20,
      "moderateWeight": 5,
      "description": "安全漏洞检查阈值"
    },
    "testCoverage": {
      "minCoverage": 80,
      "minStatements": 80,
      "minBranches": 70,
      "minFunctions": 80,
      "minLines": 80,
      "description": "测试覆盖率要求"
    },
    "build": {
      "maxSizeMB": 50,
      "maxTimeSeconds": 120,
      "description": "构建产物大小和时间限制"
    },
    "dependencies": {
      "maxOutdated": 10,
      "maxHighVulns": 0,
      "requireLicenseCheck": true,
      "description": "依赖包管理要求"
    },
    "performance": {
      "maxBundleSizeKB": 500,
      "maxLoadTimeMs": 3000,
      "description": "性能指标阈值"
    },
    "quality": {
      "minOverallScore": 80,
      "criticalBlocking": true,
      "failOnWarnings": false,
      "description": "整体质量要求"
    },
    "enforcement": {
      "preCommit": {
        "enabled": true,
        "checks": [
          "eslint"
        ],
        "failOnError": true
      },
      "prePush": {
        "enabled": true,
        "checks": [
          "eslint",
          "testCoverage",
          "build"
        ],
        "failOnError": true
      },
      "ci": {
        "enabled": true,
        "checks": [
          "all"
        ],
        "failOnError": true,
        "generateReport": true
      }
    }
  },
  "results": {
    "eslint": {
      "status": "FAILED",
      "errors": 0,
      "warnings": 0,
      "score": 0,
      "issues": [],
      "error": "Command failed: pnpm run lint --format=json"
    },
    "security": {
      "status": "ERROR",
      "vulnerabilities": 0,
      "critical": 0,
      "high": 0,
      "moderate": 0,
      "low": 0,
      "score": 0,
      "error": "Command failed: pnpm audit --json"
    },
    "testCoverage": {
      "status": "FAILED",
      "coverageAvailable": false,
      "testsPassed": false,
      "score": 0,
      "error": "Command failed: pnpm test\nFAIL src/__tests__/routeRegistration.test.ts\n  ● Console\n\n    console.warn\n      ⚠️ 新路由文件发现: cache.ts - 请在测试中添加预期路径\n\n      77 |       if (!expectedPath) {\n      78 |         // 如果没有预期路径，说明是新文件，需要添加到映射中\n    > 79 |         console.warn(`⚠️ 新路由文件发现: ${file}.ts - 请在测试中添加预期路径`);\n         |                 ^\n      80 |       }\n      81 |       \n      82 |       expect(expectedPath).toBeDefined();\n\n      at src/__tests__/routeRegistration.test.ts:79:17\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (src/__tests__/routeRegistration.test.ts:74:16)\n\n  ● Route Registration Tests › should register all route files\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      80 |       }\n      81 |       \n    > 82 |       expect(expectedPath).toBeDefined();\n         |                            ^\n      83 |       expect(expectedPath).toBeTruthy();\n      84 |     });\n      85 |\n\n      at src/__tests__/routeRegistration.test.ts:82:28\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (src/__tests__/routeRegistration.test.ts:74:16)\n\nPASS src/test/visualization-simple.test.ts\n  ● Console\n\n    console.error\n      Error getting queue stats: Error: Test error\n          at VisualizationDataService.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization-simple.test.ts:287:15)\n          at /mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:397:39\n          at VisualizationDataService.<anonymous> (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:404:13)\n          at VisualizationDataService.mockConstructor (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:148:19)\n          at VisualizationController.getQueueStats (/mnt/data/ss/wss/llmchat/backend/src/controllers/VisualizationController.ts:186:34)\n          at Object.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization-simple.test.ts:303:24)\n          at Promise.then.completed (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n          at async _runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async run (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n          at async runAndTransformResultsToJestFormat (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at async jestAdapter (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at async runTestInternal (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n          at async runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n\n      195 |       });\n      196 |     } catch (error) {\n    > 197 |       console.error('Error getting queue stats:', error);\n          |               ^\n      198 |       res.status(500).json({\n      199 |         success: false,\n      200 |         error: 'Failed to get queue stats',\n\n      at VisualizationController.getQueueStats (src/controllers/VisualizationController.ts:197:15)\n      at Object.<anonymous> (src/test/visualization-simple.test.ts:303:24)\n\nPASS src/__tests__/performance/CachePerformance.test.ts\nPASS src/__tests__/services/PasswordService.test.ts\n\n  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"Error collecting realtime data: TypeError: Cannot read properties of undefined (reading 'active')\n        at VisualizationDataService.collectRedisStats (/mnt/data/ss/wss/llmchat/backend/src/services/VisualizationDataService.ts:145:35)\n        at VisualizationDataService.collectAllData (/mnt/data/ss/wss/llmchat/backend/src/services/VisualizationDataService.ts:64:18)\n        at Timeout._onTimeout (/mnt/data/ss/wss/llmchat/backend/src/services/VisualizationDataService.ts:39:28)\n        at listOnTimeout (node:internal/timers:588:17)\n        at processTimers (node:internal/timers:523:7)\".\n\n      143 |     // 并行收集各种数据\n      144 |     const [queueStats, systemStats, redisStats, performanceMetrics] = await Promise.all([\n    > 145 |       this.collectQueueStats(timestamp),\n          |                                   ^\n      146 |       this.collectSystemStats(timestamp),\n      147 |       this.collectRedisStats(timestamp),\n      148 |       this.collectPerformanceMetrics(timestamp),\n\n      at VisualizationDataService.collectRedisStats (src/services/VisualizationDataService.ts:145:35)\n      at VisualizationDataService.collectAllData (src/services/VisualizationDataService.ts:64:18)\n      at Timeout._onTimeout (src/services/VisualizationDataService.ts:39:28)\n      at processTimers (node:internal/timers:523:7)\".\n      at console.error (../node_modules/.pnpm/@jest+console@29.7.0/node_modules/@jest/console/build/BufferedConsole.js:127:10)\n      at Timeout._onTimeout (src/services/VisualizationDataService.ts:42:25)\n\nPASS src/__tests__/performance/BasicPerformance.test.ts\nPASS src/test/visualization.test.ts\n  ● Console\n\n    console.error\n      Error getting queue stats: Error: Test error\n          at VisualizationDataService.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization.test.ts:548:15)\n          at /mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:397:39\n          at VisualizationDataService.<anonymous> (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:404:13)\n          at VisualizationDataService.mockConstructor (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:148:19)\n          at VisualizationController.getQueueStats (/mnt/data/ss/wss/llmchat/backend/src/controllers/VisualizationController.ts:186:34)\n          at Object.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization.test.ts:551:24)\n          at Promise.then.completed (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n          at async _runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async run (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n          at async runAndTransformResultsToJestFormat (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at async jestAdapter (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at async runTestInternal (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n          at async runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n\n      195 |       });\n      196 |     } catch (error) {\n    > 197 |       console.error('Error getting queue stats:', error);\n          |               ^\n      198 |       res.status(500).json({\n      199 |         success: false,\n      200 |         error: 'Failed to get queue stats',\n\n      at VisualizationController.getQueueStats (src/controllers/VisualizationController.ts:197:15)\n      at Object.<anonymous> (src/test/visualization.test.ts:551:24)\n\n    console.error\n      Error getting Redis stats: Error: Connection pool error\n          at MockRedisConnectionPool.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization.test.ts:697:15)\n          at /mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:397:39\n          at MockRedisConnectionPool.<anonymous> (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:404:13)\n          at MockRedisConnectionPool.mockConstructor [as getStats] (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:148:19)\n          at VisualizationController.getRedisStats (/mnt/data/ss/wss/llmchat/backend/src/controllers/VisualizationController.ts:258:45)\n          at Object.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization.test.ts:700:24)\n          at Promise.then.completed (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n          at async _runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async run (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n          at async runAndTransformResultsToJestFormat (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at async jestAdapter (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at async runTestInternal (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n          at async runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n\n      267 |       });\n      268 |     } catch (error) {\n    > 269 |       console.error('Error getting Redis stats:', error);\n          |               ^\n      270 |       res.status(500).json({\n      271 |         success: false,\n      272 |         error: 'Failed to get Redis stats',\n\n      at VisualizationController.getRedisStats (src/controllers/VisualizationController.ts:269:15)\n      at Object.<anonymous> (src/test/visualization.test.ts:700:24)\n\n    console.error\n      Error getting queue stats: Error: Queue manager error\n          at VisualizationDataService.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization.test.ts:721:15)\n          at /mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:397:39\n          at VisualizationDataService.<anonymous> (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:404:13)\n          at VisualizationDataService.mockConstructor (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:148:19)\n          at VisualizationController.getQueueStats (/mnt/data/ss/wss/llmchat/backend/src/controllers/VisualizationController.ts:186:34)\n          at Object.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization.test.ts:724:24)\n          at Promise.then.completed (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n          at async _runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async run (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n          at async runAndTransformResultsToJestFormat (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at async jestAdapter (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at async runTestInternal (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n          at async runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n\n      195 |       });\n      196 |     } catch (error) {\n    > 197 |       console.error('Error getting queue stats:', error);\n          |               ^\n      198 |       res.status(500).json({\n      199 |         success: false,\n      200 |         error: 'Failed to get queue stats',\n\n      at VisualizationController.getQueueStats (src/controllers/VisualizationController.ts:197:15)\n      at Object.<anonymous> (src/test/visualization.test.ts:724:24)\n\n    console.error\n      Error getting dashboard data: Error: Monitoring service error\n          at VisualizationDataService.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization.test.ts:745:15)\n          at /mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:397:39\n          at VisualizationDataService.<anonymous> (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:404:13)\n          at VisualizationDataService.mockConstructor [as getRealtimeSummary] (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-mock@29.7.0/node_modules/jest-mock/build/index.js:148:19)\n          at VisualizationController.getDashboardData (/mnt/data/ss/wss/llmchat/backend/src/controllers/VisualizationController.ts:146:46)\n          at Object.<anonymous> (/mnt/data/ss/wss/llmchat/backend/src/test/visualization.test.ts:748:24)\n          at Promise.then.completed (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n          at async _runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async _runTestsForDescribeBlock (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n          at async run (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n          at async runAndTransformResultsToJestFormat (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at async jestAdapter (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at async runTestInternal (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n          at async runTest (/mnt/data/ss/wss/llmchat/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n\n      156 |       });\n      157 |     } catch (error) {\n    > 158 |       console.error('Error getting dashboard data:', error);\n          |               ^\n      159 |       res.status(500).json({\n      160 |         success: false,\n      161 |         error: 'Failed to get dashboard data',\n\n      at VisualizationController.getDashboardData (src/controllers/VisualizationController.ts:158:15)\n      at Object.<anonymous> (src/test/visualization.test.ts:748:24)\n\nPASS src/__tests__/services/TokenService.test.ts\nPASS src/__tests__/services/AuthServiceV2-redis.test.ts\n  ● Console\n\n    console.warn\n      ⚠️  Missing recommended environment variables {\n        variables: { '0': 'FASTGPT_API_***_1 (using default or degraded mode)' }\n      }\n\n      14 |   },\n      15 |   warn: (message: string, meta?: any) => {\n    > 16 |     console.warn(LogSanitizer.sanitize(message), meta ? LogSanitizer.sanitizeObject(meta) : '');\n         |             ^\n      17 |   },\n      18 |   debug: (message: string, meta?: any) => {\n      19 |     console.log(`[DEBUG] ${LogSanitizer.sanitize(message)}`, meta ? LogSanitizer.sanitizeObject(meta) : '');\n\n      at Object.warn (src/utils/logSanitizer.ts:16:13)\n      at EnvManager.validateRequired (src/config/EnvManager.ts:119:18)\n      at new EnvManager (src/config/EnvManager.ts:29:10)\n      at Function.getInstance (src/config/EnvManager.ts:38:29)\n      at Object.<anonymous> (src/config/EnvManager.ts:302:38)\n      at Object.<anonymous> (src/utils/envHelper.ts:12:1)\n      at Object.<anonymous> (src/utils/db.ts:6:1)\n      at Object.<anonymous> (src/services/AuthServiceV2.ts:19:1)\n      at Object.<anonymous> (src/__tests__/services/AuthServiceV2-redis.test.ts:12:1)\n\nPASS src/__tests__/analyticsService.test.ts\nPASS src/__tests__/services/ChatProxyService.test.ts\n  ● Console\n\n    console.warn\n      ⚠️  Missing recommended environment variables {\n        variables: { '0': 'FASTGPT_API_***_1 (using default or degraded mode)' }\n      }\n\n      14 |   },\n      15 |   warn: (message: string, meta?: any) => {\n    > 16 |     console.warn(LogSanitizer.sanitize(message), meta ? LogSanitizer.sanitizeObject(meta) : '');\n         |             ^\n      17 |   },\n      18 |   debug: (message: string, meta?: any) => {\n      19 |     console.log(`[DEBUG] ${LogSanitizer.sanitize(message)}`, meta ? LogSanitizer.sanitizeObject(meta) : '');\n\n      at Object.warn (src/utils/logSanitizer.ts:16:13)\n      at EnvManager.validateRequired (src/config/EnvManager.ts:119:18)\n      at new EnvManager (src/config/EnvManager.ts:29:10)\n      at Function.getInstance (src/config/EnvManager.ts:38:29)\n      at Object.<anonymous> (src/config/EnvManager.ts:302:38)\n      at Object.<anonymous> (src/utils/envHelper.ts:12:1)\n      at Object.<anonymous> (src/utils/db.ts:6:1)\n      at Object.<anonymous> (src/services/ChatLogService.ts:3:1)\n      at Object.<anonymous> (src/services/ChatProxyService.ts:26:1)\n      at Object.<anonymous> (src/__tests__/services/ChatProxyService.test.ts:14:1)\n\nPASS src/__tests__/services/AuthServiceV2.test.ts\n  ● Console\n\n    console.warn\n      ⚠️  Missing recommended environment variables {\n        variables: { '0': 'FASTGPT_API_***_1 (using default or degraded mode)' }\n      }\n\n      14 |   },\n      15 |   warn: (message: string, meta?: any) => {\n    > 16 |     console.warn(LogSanitizer.sanitize(message), meta ? LogSanitizer.sanitizeObject(meta) : '');\n         |             ^\n      17 |   },\n      18 |   debug: (message: string, meta?: any) => {\n      19 |     console.log(`[DEBUG] ${LogSanitizer.sanitize(message)}`, meta ? LogSanitizer.sanitizeObject(meta) : '');\n\n      at Object.warn (src/utils/logSanitizer.ts:16:13)\n      at EnvManager.validateRequired (src/config/EnvManager.ts:119:18)\n      at new EnvManager (src/config/EnvManager.ts:29:10)\n      at Function.getInstance (src/config/EnvManager.ts:38:29)\n      at Object.<anonymous> (src/config/EnvManager.ts:302:38)\n      at Object.<anonymous> (src/utils/envHelper.ts:12:1)\n      at Object.<anonymous> (src/utils/db.ts:6:1)\n      at Object.<anonymous> (src/services/AuthServiceV2.ts:19:1)\n      at Object.<anonymous> (src/__tests__/services/AuthServiceV2.test.ts:17:1)\n\nPASS src/test/session-service.test.ts\n  ● Console\n\n    console.warn\n      ⚠️  Missing recommended environment variables {\n        variables: { '0': 'FASTGPT_API_***_1 (using default or degraded mode)' }\n      }\n\n      14 |   },\n      15 |   warn: (message: string, meta?: any) => {\n    > 16 |     console.warn(LogSanitizer.sanitize(message), meta ? LogSanitizer.sanitizeObject(meta) : '');\n         |             ^\n      17 |   },\n      18 |   debug: (message: string, meta?: any) => {\n      19 |     console.log(`[DEBUG] ${LogSanitizer.sanitize(message)}`, meta ? LogSanitizer.sanitizeObject(meta) : '');\n\n      at Object.warn (src/utils/logSanitizer.ts:16:13)\n      at EnvManager.validateRequired (src/config/EnvManager.ts:119:18)\n      at new EnvManager (src/config/EnvManager.ts:29:10)\n      at Function.getInstance (src/config/EnvManager.ts:38:29)\n      at Object.<anonymous> (src/config/EnvManager.ts:302:38)\n      at Object.<anonymous> (src/utils/envHelper.ts:12:1)\n      at Object.<anonymous> (src/utils/db.ts:6:1)\n      at Object.<anonymous> (src/services/AgentConfigService.ts:4:1)\n      at Object.<anonymous> (src/test/session-service.test.ts:2:1)\n\nPASS src/__tests__/agentConfigService.test.ts\n  ● Console\n\n    console.warn\n      ⚠️  Missing recommended environment variables {\n        variables: { '0': 'FASTGPT_API_***_1 (using default or degraded mode)' }\n      }\n\n      14 |   },\n      15 |   warn: (message: string, meta?: any) => {\n    > 16 |     console.warn(LogSanitizer.sanitize(message), meta ? LogSanitizer.sanitizeObject(meta) : '');\n         |             ^\n      17 |   },\n      18 |   debug: (message: string, meta?: any) => {\n      19 |     console.log(`[DEBUG] ${LogSanitizer.sanitize(message)}`, meta ? LogSanitizer.sanitizeObject(meta) : '');\n\n      at Object.warn (src/utils/logSanitizer.ts:16:13)\n      at EnvManager.validateRequired (src/config/EnvManager.ts:119:18)\n      at new EnvManager (src/config/EnvManager.ts:29:10)\n      at Function.getInstance (src/config/EnvManager.ts:38:29)\n      at Object.<anonymous> (src/config/EnvManager.ts:302:38)\n      at Object.<anonymous> (src/utils/envHelper.ts:12:1)\n      at Object.<anonymous> (src/services/AgentConfigService.ts:6:1)\n      at Object.<anonymous> (src/__tests__/agentConfigService.test.ts:11:1)\n\nPASS src/__tests__/difyInit.test.ts\n  ● Console\n\n    console.warn\n      ⚠️  Missing recommended environment variables {\n        variables: { '0': 'FASTGPT_API_***_1 (using default or degraded mode)' }\n      }\n\n      14 |   },\n      15 |   warn: (message: string, meta?: any) => {\n    > 16 |     console.warn(LogSanitizer.sanitize(message), meta ? LogSanitizer.sanitizeObject(meta) : '');\n         |             ^\n      17 |   },\n      18 |   debug: (message: string, meta?: any) => {\n      19 |     console.log(`[DEBUG] ${LogSanitizer.sanitize(message)}`, meta ? LogSanitizer.sanitizeObject(meta) : '');\n\n      at Object.warn (src/utils/logSanitizer.ts:16:13)\n      at EnvManager.validateRequired (src/config/EnvManager.ts:119:18)\n      at new EnvManager (src/config/EnvManager.ts:29:10)\n      at Function.getInstance (src/config/EnvManager.ts:38:29)\n      at Object.<anonymous> (src/config/EnvManager.ts:302:38)\n      at Object.<anonymous> (src/utils/envHelper.ts:12:1)\n      at Object.<anonymous> (src/utils/db.ts:6:1)\n      at Object.<anonymous> (src/services/AgentConfigService.ts:4:1)\n      at Object.<anonymous> (src/__tests__/difyInit.test.ts:2:1)\n\nPASS src/__tests__/utils/logger.test.ts\nPASS src/__tests__/services/AgentConfigService.border.test.ts\n  ● Console\n\n    console.warn\n      ⚠️  Missing recommended environment variables {\n        variables: { '0': 'FASTGPT_API_***_1 (using default or degraded mode)' }\n      }\n\n      14 |   },\n      15 |   warn: (message: string, meta?: any) => {\n    > 16 |     console.warn(LogSanitizer.sanitize(message), meta ? LogSanitizer.sanitizeObject(meta) : '');\n         |             ^\n      17 |   },\n      18 |   debug: (message: string, meta?: any) => {\n      19 |     console.log(`[DEBUG] ${LogSanitizer.sanitize(message)}`, meta ? LogSanitizer.sanitizeObject(meta) : '');\n\n      at Object.warn (src/utils/logSanitizer.ts:16:13)\n      at EnvManager.validateRequired (src/config/EnvManager.ts:119:18)\n      at new EnvManager (src/config/EnvManager.ts:29:10)\n      at Function.getInstance (src/config/EnvManager.ts:38:29)\n      at Object.<anonymous> (src/config/EnvManager.ts:302:38)\n      at Object.<anonymous> (src/utils/envHelper.ts:12:1)\n      at Object.<anonymous> (src/utils/db.ts:6:1)\n      at Object.<anonymous> (src/services/AgentConfigService.ts:4:1)\n      at Object.<anonymous> (src/__tests__/services/AgentConfigService.border.test.ts:1:1)\n\n    console.warn\n      ⚠️  Missing recommended environment variables {\n        variables: { '0': 'FASTGPT_API_***_1 (using default or degraded mode)' }\n      }\n\n      14 |   },\n      15 |   warn: (message: string, meta?: any) => {\n    > 16 |     console.warn(LogSanitizer.sanitize(message), meta ? LogSanitizer.sanitizeObject(meta) : '');\n         |             ^\n      17 |   },\n      18 |   debug: (message: string, meta?: any) => {\n      19 |     console.log(`[DEBUG] ${LogSanitizer.sanitize(message)}`, meta ? LogSanitizer.sanitizeObject(meta) : '');\n\n      at Object.warn (src/utils/logSanitizer.ts:16:13)\n      at EnvManager.validateRequired (src/config/EnvManager.ts:119:18)\n      at new EnvManager (src/config/EnvManager.ts:29:10)\n      at Function.getInstance (src/config/EnvManager.ts:38:29)\n      at Object.<anonymous> (src/config/EnvManager.ts:302:38)\n      at Object.<anonymous> (src/utils/envHelper.ts:12:1)\n      at Object.<anonymous> (src/services/AgentConfigService.ts:6:1)\n      at Object.<anonymous> (src/__tests__/services/AgentConfigService.border.test.ts:1:1)\n\nPASS src/__tests__/services/AuditService.test.ts\nPASS src/utils/__tests__/fastgptEvents.test.ts\nPASS src/__tests__/services/TestCacheService.ts\nPASS src/__tests__/utils/MockRedis.ts\nPASS src/__tests__/setup.ts\nFAIL src/__tests__/utils/TestServer.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/middleware/databaseOptimization.ts\u001b[0m:\u001b[93m12\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2724: \u001b[0m'\"./databasePerformanceMonitor\"' has no exported member named 'databasePerformanceMonitor'. Did you mean 'DatabasePerformanceMetrics'?\n\n    \u001b[7m12\u001b[0m import { databasePerformanceMonitor } from './databasePerformanceMonitor';\n    \u001b[7m  \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/middleware/databaseOptimization.ts\u001b[0m:\u001b[93m149\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n    \u001b[7m149\u001b[0m         const optimizer = getQueryOptimizer();\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/utils/queryOptimizer.ts\u001b[0m:\u001b[93m421\u001b[0m:\u001b[93m35\u001b[0m\n        \u001b[7m421\u001b[0m export function getQueryOptimizer(pool: Pool): DatabaseQueryOptimizer {\n        \u001b[7m   \u001b[0m \u001b[96m                                  ~~~~~~~~~~\u001b[0m\n        An argument for 'pool' was not provided.\n\nFAIL src/__tests__/utils/ChatProxyTestUtils.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m97\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'CircuitBreakerManager' is not assignable to parameter of type 'QueueManager'.\n      Type 'CircuitBreakerManager' is missing the following properties from type 'QueueManager': redis, subscriber, config, queues, and 77 more.\n\n    \u001b[7m97\u001b[0m       this.circuitBreakerManager,\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m169\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'recordRequest' does not exist on type 'MonitoringService'.\n\n    \u001b[7m169\u001b[0m       this.monitoringService.recordRequest(responseTime, success, error?.message);\n    \u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m369\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getPerformanceMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m369\u001b[0m         performance: this.monitoringService.getPerformanceMetrics(),\n    \u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m370\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSLAMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m370\u001b[0m         sla: this.monitoringService.getSLAMetrics(),\n    \u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m371\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m371\u001b[0m         health: this.monitoringService.getSystemHealth(),\n    \u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m379\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m379\u001b[0m         systemHealth: this.monitoringService.getSystemHealth().status,\n    \u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m509\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getPerformanceMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m509\u001b[0m     return this.monitoringService.getPerformanceMetrics();\n    \u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m517\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m517\u001b[0m     return this.monitoringService.getSystemHealth();\n    \u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~\u001b[0m\n\nFAIL src/__tests__/services/ChatProxyService.border.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m97\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'CircuitBreakerManager' is not assignable to parameter of type 'QueueManager'.\n      Type 'CircuitBreakerManager' is missing the following properties from type 'QueueManager': redis, subscriber, config, queues, and 77 more.\n\n    \u001b[7m97\u001b[0m       this.circuitBreakerManager,\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m169\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'recordRequest' does not exist on type 'MonitoringService'.\n\n    \u001b[7m169\u001b[0m       this.monitoringService.recordRequest(responseTime, success, error?.message);\n    \u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m369\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getPerformanceMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m369\u001b[0m         performance: this.monitoringService.getPerformanceMetrics(),\n    \u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m370\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSLAMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m370\u001b[0m         sla: this.monitoringService.getSLAMetrics(),\n    \u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m371\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m371\u001b[0m         health: this.monitoringService.getSystemHealth(),\n    \u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m379\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m379\u001b[0m         systemHealth: this.monitoringService.getSystemHealth().status,\n    \u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m509\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getPerformanceMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m509\u001b[0m     return this.monitoringService.getPerformanceMetrics();\n    \u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m517\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m517\u001b[0m     return this.monitoringService.getSystemHealth();\n    \u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~\u001b[0m\n\nFAIL src/__tests__/middleware/cacheMiddleware.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2741: \u001b[0mProperty 'id' is missing in type '{ role: string; }' but required in type '{ id: string; username?: string; email?: string; role?: string; }'.\n\n    \u001b[7m34\u001b[0m       user: { role: 'user' }\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~\u001b[0m\n\n      \u001b[96msrc/types/express.d.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m9\u001b[0m\n        \u001b[7m26\u001b[0m         id: string;\n        \u001b[7m  \u001b[0m \u001b[96m        ~~\u001b[0m\n        'id' is declared here.\n      \u001b[96msrc/types/express.d.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m7\u001b[0m\n        \u001b[7m25\u001b[0m       user?: {\n        \u001b[7m  \u001b[0m \u001b[96m      ~~~~\u001b[0m\n        The expected type comes from property 'user' which is declared here on type 'Partial<Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>>'\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m67\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '{ (field: any): Response<any, Record<string, any>>; (field: string, value?: string | string[] | undefined): Response<any, Record<string, any>>; }'.\n\n    \u001b[7m67\u001b[0m       mockResponse.set!.mockReturnValue(mockResponse as Response);\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m68\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type 'Send<any, Response<any, Record<string, any>>>'.\n\n    \u001b[7m68\u001b[0m       mockResponse.json!.mockReturnValue(mockResponse as Response);\n    \u001b[7m  \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m88\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'Mock<void, [], Response<any, Record<string, any>>>' is not assignable to type '{ (cb?: (() => void) | undefined): Response<any, Record<string, any>>; (chunk: any, cb?: (() => void) | undefined): Response<any, Record<string, any>>; (chunk: any, encoding: BufferEncoding, cb?: (() => void) | undefined): Response<...>; }'.\n      Type 'void' is not assignable to type 'Response<any, Record<string, any>>'.\n\n    \u001b[7m88\u001b[0m       mockResponse.end = jest.fn(function(this: Response) {\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m217\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m217\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockImplementation' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m262\u001b[0m       mockResponse.get!.mockImplementation((header) => {\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'header' implicitly has an 'any' type.\n\n    \u001b[7m262\u001b[0m       mockResponse.get!.mockImplementation((header) => {\n    \u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m293\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockImplementation' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m293\u001b[0m       mockResponse.get!.mockImplementation((header) => {\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m293\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'header' implicitly has an 'any' type.\n\n    \u001b[7m293\u001b[0m       mockResponse.get!.mockImplementation((header) => {\n    \u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m325\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m325\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m354\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m354\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m381\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m381\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m408\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '{ (field: any): Response<any, Record<string, any>>; (field: string, value?: string | string[] | undefined): Response<any, Record<string, any>>; }'.\n\n    \u001b[7m408\u001b[0m       mockResponse.set!.mockReturnValue(mockResponse as Response);\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m409\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type 'Send<any, Response<any, Record<string, any>>>'.\n\n    \u001b[7m409\u001b[0m       mockResponse.json!.mockReturnValue(mockResponse as Response);\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m474\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ hits: number; misses: number; hitRate: number; }' is not assignable to parameter of type 'RedisCacheStats'.\n      Type '{ hits: number; misses: number; hitRate: number; }' is missing the following properties from type 'RedisCacheStats': memoryItems, memorySize, redisConnected, connected, and 10 more.\n\n    \u001b[7m474\u001b[0m       mockCacheManager.getStats.mockReturnValue({\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~\u001b[0m\n    \u001b[7m475\u001b[0m         hits: 10,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m...\u001b[0m \n    \u001b[7m477\u001b[0m         hitRate: 66.67\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m478\u001b[0m       });\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m505\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m505\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n\nFAIL src/__tests__/integration/PerformanceOptimization.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/middleware/databaseOptimization.ts\u001b[0m:\u001b[93m12\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2724: \u001b[0m'\"./databasePerformanceMonitor\"' has no exported member named 'databasePerformanceMonitor'. Did you mean 'DatabasePerformanceMetrics'?\n\n    \u001b[7m12\u001b[0m import { databasePerformanceMonitor } from './databasePerformanceMonitor';\n    \u001b[7m  \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/middleware/databaseOptimization.ts\u001b[0m:\u001b[93m149\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n    \u001b[7m149\u001b[0m         const optimizer = getQueryOptimizer();\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/utils/queryOptimizer.ts\u001b[0m:\u001b[93m421\u001b[0m:\u001b[93m35\u001b[0m\n        \u001b[7m421\u001b[0m export function getQueryOptimizer(pool: Pool): DatabaseQueryOptimizer {\n        \u001b[7m   \u001b[0m \u001b[96m                                  ~~~~~~~~~~\u001b[0m\n        An argument for 'pool' was not provided.\n\nFAIL src/__tests__/frontend/reasoning.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/__tests__/frontend/reasoning.test.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m8\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../../lib/reasoning' or its corresponding type declarations.\n\n    \u001b[7m13\u001b[0m } from '../../lib/reasoning';\n    \u001b[7m  \u001b[0m \u001b[91m       ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/reasoning.test.ts\u001b[0m:\u001b[93m417\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'result' implicitly has an 'any' type.\n\n    \u001b[7m417\u001b[0m       results.forEach((result, index) => {\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/reasoning.test.ts\u001b[0m:\u001b[93m417\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'index' implicitly has an 'any' type.\n\n    \u001b[7m417\u001b[0m       results.forEach((result, index) => {\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~\u001b[0m\n\nFAIL src/__tests__/frontend/HybridStorageService.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m8\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../../lib/HybridStorageService' or its corresponding type declarations.\n\n    \u001b[7m13\u001b[0m } from '../../lib/HybridStorageService';\n    \u001b[7m  \u001b[0m \u001b[91m       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m42\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'window'.\n\n    \u001b[7m42\u001b[0m   Object.defineProperty(window, 'indexedDB', {\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m47\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'window'.\n\n    \u001b[7m47\u001b[0m   Object.defineProperty(window, 'localStorage', {\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m52\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'window'.\n\n    \u001b[7m52\u001b[0m   Object.defineProperty(window, 'sessionStorage', {\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m564\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'result' implicitly has an 'any' type.\n\n    \u001b[7m564\u001b[0m       results.forEach((result, index) => {\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m564\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'index' implicitly has an 'any' type.\n\n    \u001b[7m564\u001b[0m       results.forEach((result, index) => {\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m565\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2532: \u001b[0mObject is possibly 'undefined'.\n\n    \u001b[7m565\u001b[0m         expect(result).toEqual(operations[index].data);\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~~~~~~~~\u001b[0m\n\nFAIL src/__tests__/controllers/cacheController.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m90\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type 'Send<any, Response<any, Record<string, any>>>'.\n\n    \u001b[7m90\u001b[0m       mockResponse.json!.mockReturnValue(mockResponse as Response);\n    \u001b[7m  \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m677\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ hits: number; misses: number; hitRate: number; memoryUsage: number; }' is not assignable to parameter of type 'RedisCacheStats'.\n      Type '{ hits: number; misses: number; hitRate: number; memoryUsage: number; }' is missing the following properties from type 'RedisCacheStats': memoryItems, memorySize, redisConnected, connected, and 9 more.\n\n    \u001b[7m677\u001b[0m       mockCacheManager.getStats.mockReturnValue(mockRedisStats);\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m731\u001b[0m:\u001b[93m50\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ defaultTtl: number; maxMemoryItems: number; enableCompression: boolean; }' is not assignable to parameter of type 'RedisCacheConfig'.\n      Type '{ defaultTtl: number; maxMemoryItems: number; enableCompression: boolean; }' is missing the following properties from type 'RedisCacheConfig': maxMemorySize, compressionThreshold, keyPrefix, enableLocks, and 3 more.\n\n    \u001b[7m731\u001b[0m       mockCacheManager.getConfig.mockReturnValue(mockConfig);\n    \u001b[7m   \u001b[0m \u001b[91m                                                 ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m783\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ connected: boolean; totalRequests: number; hitRate: number; memoryUsage: number; }' is not assignable to parameter of type 'RedisCacheStats'.\n      Type '{ connected: boolean; totalRequests: number; hitRate: number; memoryUsage: number; }' is missing the following properties from type 'RedisCacheStats': memoryItems, memorySize, redisConnected, hits, and 9 more.\n\n    \u001b[7m783\u001b[0m       mockCacheManager.getStats.mockReturnValue(mockStats);\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m805\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ connected: false; totalRequests: number; hitRate: number; memoryUsage: number; }' is not assignable to parameter of type 'RedisCacheStats'.\n      Type '{ connected: false; totalRequests: number; hitRate: number; memoryUsage: number; }' is missing the following properties from type 'RedisCacheStats': memoryItems, memorySize, redisConnected, hits, and 9 more.\n\n    \u001b[7m805\u001b[0m       mockCacheManager.getStats.mockReturnValue({\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~\u001b[0m\n    \u001b[7m806\u001b[0m         connected: false,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m...\u001b[0m \n    \u001b[7m809\u001b[0m         memoryUsage: 0\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m810\u001b[0m       });\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~\u001b[0m\n\nFAIL src/test/memory-optimization.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/memory-optimization.test.ts\u001b[0m:\u001b[93m49\u001b[0m:\u001b[93m73\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'monitoring' does not exist on type '{ healthy: boolean; issues: string[]; stats?: MemoryStats; }'.\n\n    \u001b[7m49\u001b[0m       expect(memoryOptimizationService.getMemoryMonitor().healthCheck().monitoring).toBe(true);\n    \u001b[7m  \u001b[0m \u001b[91m                                                                        ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/memory-optimization.test.ts\u001b[0m:\u001b[93m56\u001b[0m:\u001b[93m73\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'monitoring' does not exist on type '{ healthy: boolean; issues: string[]; stats?: MemoryStats; }'.\n\n    \u001b[7m56\u001b[0m       expect(memoryOptimizationService.getMemoryMonitor().healthCheck().monitoring).toBe(false);\n    \u001b[7m  \u001b[0m \u001b[91m                                                                        ~~~~~~~~~~\u001b[0m\n\nFAIL src/test/memory-optimization.simple.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/memory-optimization.simple.test.ts\u001b[0m:\u001b[93m44\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'monitoring' does not exist on type '{ healthy: boolean; issues: string[]; stats?: MemoryStats; }'.\n\n    \u001b[7m44\u001b[0m       expect(health.monitoring).toBe(true);\n    \u001b[7m  \u001b[0m \u001b[91m                    ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/memory-optimization.simple.test.ts\u001b[0m:\u001b[93m54\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'monitoring' does not exist on type '{ healthy: boolean; issues: string[]; stats?: MemoryStats; }'.\n\n    \u001b[7m54\u001b[0m       expect(health.monitoring).toBe(false);\n    \u001b[7m  \u001b[0m \u001b[91m                    ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/memory-optimization.simple.test.ts\u001b[0m:\u001b[93m97\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2551: \u001b[0mProperty 'duration' does not exist on type 'OptimizationReport'. Did you mean 'durationMs'?\n\n    \u001b[7m97\u001b[0m       expect(typeof result.duration).toBe('number');\n    \u001b[7m  \u001b[0m \u001b[91m                           ~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/services/MemoryOptimizationService.ts\u001b[0m:\u001b[93m58\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m58\u001b[0m   durationMs: number;\n        \u001b[7m  \u001b[0m \u001b[96m  ~~~~~~~~~~\u001b[0m\n        'durationMs' is declared here.\n\nSummary of all failing tests\nFAIL src/__tests__/routeRegistration.test.ts\n  ● Route Registration Tests › should register all route files\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      80 |       }\n      81 |       \n    > 82 |       expect(expectedPath).toBeDefined();\n         |                            ^\n      83 |       expect(expectedPath).toBeTruthy();\n      84 |     });\n      85 |\n\n      at src/__tests__/routeRegistration.test.ts:82:28\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (src/__tests__/routeRegistration.test.ts:74:16)\n\nFAIL src/__tests__/utils/TestServer.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/middleware/databaseOptimization.ts\u001b[0m:\u001b[93m12\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2724: \u001b[0m'\"./databasePerformanceMonitor\"' has no exported member named 'databasePerformanceMonitor'. Did you mean 'DatabasePerformanceMetrics'?\n\n    \u001b[7m12\u001b[0m import { databasePerformanceMonitor } from './databasePerformanceMonitor';\n    \u001b[7m  \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/middleware/databaseOptimization.ts\u001b[0m:\u001b[93m149\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n    \u001b[7m149\u001b[0m         const optimizer = getQueryOptimizer();\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/utils/queryOptimizer.ts\u001b[0m:\u001b[93m421\u001b[0m:\u001b[93m35\u001b[0m\n        \u001b[7m421\u001b[0m export function getQueryOptimizer(pool: Pool): DatabaseQueryOptimizer {\n        \u001b[7m   \u001b[0m \u001b[96m                                  ~~~~~~~~~~\u001b[0m\n        An argument for 'pool' was not provided.\n\nFAIL src/__tests__/utils/ChatProxyTestUtils.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m97\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'CircuitBreakerManager' is not assignable to parameter of type 'QueueManager'.\n      Type 'CircuitBreakerManager' is missing the following properties from type 'QueueManager': redis, subscriber, config, queues, and 77 more.\n\n    \u001b[7m97\u001b[0m       this.circuitBreakerManager,\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m169\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'recordRequest' does not exist on type 'MonitoringService'.\n\n    \u001b[7m169\u001b[0m       this.monitoringService.recordRequest(responseTime, success, error?.message);\n    \u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m369\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getPerformanceMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m369\u001b[0m         performance: this.monitoringService.getPerformanceMetrics(),\n    \u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m370\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSLAMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m370\u001b[0m         sla: this.monitoringService.getSLAMetrics(),\n    \u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m371\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m371\u001b[0m         health: this.monitoringService.getSystemHealth(),\n    \u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m379\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m379\u001b[0m         systemHealth: this.monitoringService.getSystemHealth().status,\n    \u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m509\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getPerformanceMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m509\u001b[0m     return this.monitoringService.getPerformanceMetrics();\n    \u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m517\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m517\u001b[0m     return this.monitoringService.getSystemHealth();\n    \u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~\u001b[0m\n\nFAIL src/__tests__/services/ChatProxyService.border.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m97\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'CircuitBreakerManager' is not assignable to parameter of type 'QueueManager'.\n      Type 'CircuitBreakerManager' is missing the following properties from type 'QueueManager': redis, subscriber, config, queues, and 77 more.\n\n    \u001b[7m97\u001b[0m       this.circuitBreakerManager,\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m169\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'recordRequest' does not exist on type 'MonitoringService'.\n\n    \u001b[7m169\u001b[0m       this.monitoringService.recordRequest(responseTime, success, error?.message);\n    \u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m369\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getPerformanceMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m369\u001b[0m         performance: this.monitoringService.getPerformanceMetrics(),\n    \u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m370\u001b[0m:\u001b[93m37\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSLAMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m370\u001b[0m         sla: this.monitoringService.getSLAMetrics(),\n    \u001b[7m   \u001b[0m \u001b[91m                                    ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m371\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m371\u001b[0m         health: this.monitoringService.getSystemHealth(),\n    \u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m379\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m379\u001b[0m         systemHealth: this.monitoringService.getSystemHealth().status,\n    \u001b[7m   \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m509\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getPerformanceMetrics' does not exist on type 'MonitoringService'.\n\n    \u001b[7m509\u001b[0m     return this.monitoringService.getPerformanceMetrics();\n    \u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/ProtectionService.ts\u001b[0m:\u001b[93m517\u001b[0m:\u001b[93m35\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'getSystemHealth' does not exist on type 'MonitoringService'.\n\n    \u001b[7m517\u001b[0m     return this.monitoringService.getSystemHealth();\n    \u001b[7m   \u001b[0m \u001b[91m                                  ~~~~~~~~~~~~~~~\u001b[0m\n\nFAIL src/__tests__/middleware/cacheMiddleware.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m34\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2741: \u001b[0mProperty 'id' is missing in type '{ role: string; }' but required in type '{ id: string; username?: string; email?: string; role?: string; }'.\n\n    \u001b[7m34\u001b[0m       user: { role: 'user' }\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~\u001b[0m\n\n      \u001b[96msrc/types/express.d.ts\u001b[0m:\u001b[93m26\u001b[0m:\u001b[93m9\u001b[0m\n        \u001b[7m26\u001b[0m         id: string;\n        \u001b[7m  \u001b[0m \u001b[96m        ~~\u001b[0m\n        'id' is declared here.\n      \u001b[96msrc/types/express.d.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m7\u001b[0m\n        \u001b[7m25\u001b[0m       user?: {\n        \u001b[7m  \u001b[0m \u001b[96m      ~~~~\u001b[0m\n        The expected type comes from property 'user' which is declared here on type 'Partial<Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>>'\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m67\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '{ (field: any): Response<any, Record<string, any>>; (field: string, value?: string | string[] | undefined): Response<any, Record<string, any>>; }'.\n\n    \u001b[7m67\u001b[0m       mockResponse.set!.mockReturnValue(mockResponse as Response);\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m68\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type 'Send<any, Response<any, Record<string, any>>>'.\n\n    \u001b[7m68\u001b[0m       mockResponse.json!.mockReturnValue(mockResponse as Response);\n    \u001b[7m  \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m88\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'Mock<void, [], Response<any, Record<string, any>>>' is not assignable to type '{ (cb?: (() => void) | undefined): Response<any, Record<string, any>>; (chunk: any, cb?: (() => void) | undefined): Response<any, Record<string, any>>; (chunk: any, encoding: BufferEncoding, cb?: (() => void) | undefined): Response<...>; }'.\n      Type 'void' is not assignable to type 'Response<any, Record<string, any>>'.\n\n    \u001b[7m88\u001b[0m       mockResponse.end = jest.fn(function(this: Response) {\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m217\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m217\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockImplementation' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m262\u001b[0m       mockResponse.get!.mockImplementation((header) => {\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'header' implicitly has an 'any' type.\n\n    \u001b[7m262\u001b[0m       mockResponse.get!.mockImplementation((header) => {\n    \u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m293\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockImplementation' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m293\u001b[0m       mockResponse.get!.mockImplementation((header) => {\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m293\u001b[0m:\u001b[93m45\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'header' implicitly has an 'any' type.\n\n    \u001b[7m293\u001b[0m       mockResponse.get!.mockImplementation((header) => {\n    \u001b[7m   \u001b[0m \u001b[91m                                            ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m325\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m325\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m354\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m354\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m381\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m381\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m408\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '{ (field: any): Response<any, Record<string, any>>; (field: string, value?: string | string[] | undefined): Response<any, Record<string, any>>; }'.\n\n    \u001b[7m408\u001b[0m       mockResponse.set!.mockReturnValue(mockResponse as Response);\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m409\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type 'Send<any, Response<any, Record<string, any>>>'.\n\n    \u001b[7m409\u001b[0m       mockResponse.json!.mockReturnValue(mockResponse as Response);\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m474\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ hits: number; misses: number; hitRate: number; }' is not assignable to parameter of type 'RedisCacheStats'.\n      Type '{ hits: number; misses: number; hitRate: number; }' is missing the following properties from type 'RedisCacheStats': memoryItems, memorySize, redisConnected, connected, and 10 more.\n\n    \u001b[7m474\u001b[0m       mockCacheManager.getStats.mockReturnValue({\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~\u001b[0m\n    \u001b[7m475\u001b[0m         hits: 10,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m...\u001b[0m \n    \u001b[7m477\u001b[0m         hitRate: 66.67\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m478\u001b[0m       });\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/middleware/cacheMiddleware.test.ts\u001b[0m:\u001b[93m505\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type '(field: string) => string | undefined'.\n\n    \u001b[7m505\u001b[0m       mockResponse.get!.mockReturnValue('application/json');\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~~\u001b[0m\n\nFAIL src/__tests__/integration/PerformanceOptimization.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/middleware/databaseOptimization.ts\u001b[0m:\u001b[93m12\u001b[0m:\u001b[93m10\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2724: \u001b[0m'\"./databasePerformanceMonitor\"' has no exported member named 'databasePerformanceMonitor'. Did you mean 'DatabasePerformanceMetrics'?\n\n    \u001b[7m12\u001b[0m import { databasePerformanceMonitor } from './databasePerformanceMonitor';\n    \u001b[7m  \u001b[0m \u001b[91m         ~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/middleware/databaseOptimization.ts\u001b[0m:\u001b[93m149\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 0.\n\n    \u001b[7m149\u001b[0m         const optimizer = getQueryOptimizer();\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/utils/queryOptimizer.ts\u001b[0m:\u001b[93m421\u001b[0m:\u001b[93m35\u001b[0m\n        \u001b[7m421\u001b[0m export function getQueryOptimizer(pool: Pool): DatabaseQueryOptimizer {\n        \u001b[7m   \u001b[0m \u001b[96m                                  ~~~~~~~~~~\u001b[0m\n        An argument for 'pool' was not provided.\n\nFAIL src/__tests__/frontend/reasoning.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/__tests__/frontend/reasoning.test.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m8\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../../lib/reasoning' or its corresponding type declarations.\n\n    \u001b[7m13\u001b[0m } from '../../lib/reasoning';\n    \u001b[7m  \u001b[0m \u001b[91m       ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/reasoning.test.ts\u001b[0m:\u001b[93m417\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'result' implicitly has an 'any' type.\n\n    \u001b[7m417\u001b[0m       results.forEach((result, index) => {\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/reasoning.test.ts\u001b[0m:\u001b[93m417\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'index' implicitly has an 'any' type.\n\n    \u001b[7m417\u001b[0m       results.forEach((result, index) => {\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~\u001b[0m\n\nFAIL src/__tests__/frontend/HybridStorageService.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m8\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../../lib/HybridStorageService' or its corresponding type declarations.\n\n    \u001b[7m13\u001b[0m } from '../../lib/HybridStorageService';\n    \u001b[7m  \u001b[0m \u001b[91m       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m42\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'window'.\n\n    \u001b[7m42\u001b[0m   Object.defineProperty(window, 'indexedDB', {\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m47\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'window'.\n\n    \u001b[7m47\u001b[0m   Object.defineProperty(window, 'localStorage', {\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m52\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'window'.\n\n    \u001b[7m52\u001b[0m   Object.defineProperty(window, 'sessionStorage', {\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m564\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'result' implicitly has an 'any' type.\n\n    \u001b[7m564\u001b[0m       results.forEach((result, index) => {\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m564\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'index' implicitly has an 'any' type.\n\n    \u001b[7m564\u001b[0m       results.forEach((result, index) => {\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/frontend/HybridStorageService.test.ts\u001b[0m:\u001b[93m565\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2532: \u001b[0mObject is possibly 'undefined'.\n\n    \u001b[7m565\u001b[0m         expect(result).toEqual(operations[index].data);\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~~~~~~~~\u001b[0m\n\nFAIL src/__tests__/controllers/cacheController.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m90\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'mockReturnValue' does not exist on type 'Send<any, Response<any, Record<string, any>>>'.\n\n    \u001b[7m90\u001b[0m       mockResponse.json!.mockReturnValue(mockResponse as Response);\n    \u001b[7m  \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m677\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ hits: number; misses: number; hitRate: number; memoryUsage: number; }' is not assignable to parameter of type 'RedisCacheStats'.\n      Type '{ hits: number; misses: number; hitRate: number; memoryUsage: number; }' is missing the following properties from type 'RedisCacheStats': memoryItems, memorySize, redisConnected, connected, and 9 more.\n\n    \u001b[7m677\u001b[0m       mockCacheManager.getStats.mockReturnValue(mockRedisStats);\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m731\u001b[0m:\u001b[93m50\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ defaultTtl: number; maxMemoryItems: number; enableCompression: boolean; }' is not assignable to parameter of type 'RedisCacheConfig'.\n      Type '{ defaultTtl: number; maxMemoryItems: number; enableCompression: boolean; }' is missing the following properties from type 'RedisCacheConfig': maxMemorySize, compressionThreshold, keyPrefix, enableLocks, and 3 more.\n\n    \u001b[7m731\u001b[0m       mockCacheManager.getConfig.mockReturnValue(mockConfig);\n    \u001b[7m   \u001b[0m \u001b[91m                                                 ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m783\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ connected: boolean; totalRequests: number; hitRate: number; memoryUsage: number; }' is not assignable to parameter of type 'RedisCacheStats'.\n      Type '{ connected: boolean; totalRequests: number; hitRate: number; memoryUsage: number; }' is missing the following properties from type 'RedisCacheStats': memoryItems, memorySize, redisConnected, hits, and 9 more.\n\n    \u001b[7m783\u001b[0m       mockCacheManager.getStats.mockReturnValue(mockStats);\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/__tests__/controllers/cacheController.test.ts\u001b[0m:\u001b[93m805\u001b[0m:\u001b[93m49\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ connected: false; totalRequests: number; hitRate: number; memoryUsage: number; }' is not assignable to parameter of type 'RedisCacheStats'.\n      Type '{ connected: false; totalRequests: number; hitRate: number; memoryUsage: number; }' is missing the following properties from type 'RedisCacheStats': memoryItems, memorySize, redisConnected, hits, and 9 more.\n\n    \u001b[7m805\u001b[0m       mockCacheManager.getStats.mockReturnValue({\n    \u001b[7m   \u001b[0m \u001b[91m                                                ~\u001b[0m\n    \u001b[7m806\u001b[0m         connected: false,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m...\u001b[0m \n    \u001b[7m809\u001b[0m         memoryUsage: 0\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m810\u001b[0m       });\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~\u001b[0m\n\nFAIL src/test/memory-optimization.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/memory-optimization.test.ts\u001b[0m:\u001b[93m49\u001b[0m:\u001b[93m73\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'monitoring' does not exist on type '{ healthy: boolean; issues: string[]; stats?: MemoryStats; }'.\n\n    \u001b[7m49\u001b[0m       expect(memoryOptimizationService.getMemoryMonitor().healthCheck().monitoring).toBe(true);\n    \u001b[7m  \u001b[0m \u001b[91m                                                                        ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/memory-optimization.test.ts\u001b[0m:\u001b[93m56\u001b[0m:\u001b[93m73\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'monitoring' does not exist on type '{ healthy: boolean; issues: string[]; stats?: MemoryStats; }'.\n\n    \u001b[7m56\u001b[0m       expect(memoryOptimizationService.getMemoryMonitor().healthCheck().monitoring).toBe(false);\n    \u001b[7m  \u001b[0m \u001b[91m                                                                        ~~~~~~~~~~\u001b[0m\n\nFAIL src/test/memory-optimization.simple.test.ts\n  ● Test suite failed to run\n\n    \u001b[96msrc/test/memory-optimization.simple.test.ts\u001b[0m:\u001b[93m44\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'monitoring' does not exist on type '{ healthy: boolean; issues: string[]; stats?: MemoryStats; }'.\n\n    \u001b[7m44\u001b[0m       expect(health.monitoring).toBe(true);\n    \u001b[7m  \u001b[0m \u001b[91m                    ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/memory-optimization.simple.test.ts\u001b[0m:\u001b[93m54\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'monitoring' does not exist on type '{ healthy: boolean; issues: string[]; stats?: MemoryStats; }'.\n\n    \u001b[7m54\u001b[0m       expect(health.monitoring).toBe(false);\n    \u001b[7m  \u001b[0m \u001b[91m                    ~~~~~~~~~~\u001b[0m\n    \u001b[96msrc/test/memory-optimization.simple.test.ts\u001b[0m:\u001b[93m97\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2551: \u001b[0mProperty 'duration' does not exist on type 'OptimizationReport'. Did you mean 'durationMs'?\n\n    \u001b[7m97\u001b[0m       expect(typeof result.duration).toBe('number');\n    \u001b[7m  \u001b[0m \u001b[91m                           ~~~~~~~~\u001b[0m\n\n      \u001b[96msrc/services/MemoryOptimizationService.ts\u001b[0m:\u001b[93m58\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m58\u001b[0m   durationMs: number;\n        \u001b[7m  \u001b[0m \u001b[96m  ~~~~~~~~~~\u001b[0m\n        'durationMs' is declared here.\n\n\nTest Suites: 11 failed, 20 passed, 31 total\nTests:       1 failed, 9 skipped, 302 passed, 312 total\nSnapshots:   0 total\nTime:        8.101 s\nRan all test suites.\nForce exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?\n"
    },
    "build": {
      "status": "FAILED",
      "buildSuccess": false,
      "buildTime": 5801,
      "buildSize": 0,
      "score": 0,
      "error": "Command failed: pnpm run build"
    },
    "dependencies": {
      "status": "PASSED",
      "total": 6,
      "production": 0,
      "development": 6,
      "outdated": 0,
      "score": 100,
      "threshold": {
        "maxOutdated": 10,
        "maxHighVulns": 0,
        "requireLicenseCheck": true,
        "description": "依赖包管理要求"
      },
      "analyzedAt": "2025-10-11T14:10:33.401Z"
    }
  },
  "analysis": {
    "overallScore": 0,
    "grade": "F",
    "criticalFailures": [
      "security"
    ],
    "recommendation": "Fix critical errors before proceeding"
  },
  "summary": {
    "totalChecks": 5,
    "passed": 1,
    "warnings": 0,
    "failed": 3,
    "errors": 1
  }
}