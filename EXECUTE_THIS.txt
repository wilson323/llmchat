┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  🚀 LLMChat 404修复 - 立即执行指令              ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

✅ 代码已100%修复完成
⚠️ 需要你执行3个命令（复制粘贴到PowerShell）

┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  步骤1：停止旧后端进程                            ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

Stop-Process -Id 19988 -Force


┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  步骤2：打开配置文件（填写数据库密码）            ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

notepad .env

# 在记事本中：
# 1. 找到第40行：DB_PASSWORD=your_secure_password_here
# 2. 改为：DB_PASSWORD=你的真实数据库密码
# 3. 保存（Ctrl+S）并关闭


┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  步骤3：生成JWT密钥并自动配置                     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

$jwt = -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 64 | ForEach-Object {[char]$_}); (Get-Content .env) -replace 'JWT_SECRET=your_super_secure_jwt_secret.*', "JWT_SECRET=$jwt" | Set-Content .env; Write-Host "✅ JWT密钥已配置: $jwt" -ForegroundColor Green


┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  步骤4：启动新后端（在新终端中执行）              ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

pnpm run backend:dev

# 预期输出：
# ✅ 数据库连接成功
# ✅ 核心路由已全部注册   ← 看到这行说明成功！
# 🚀 服务器启动成功
# 📍 端口: 3005


┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  验证修复成功                                      ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

# 测试健康检查
Invoke-WebRequest http://localhost:3005/health

# 测试登录API（应该不再是404）
Invoke-WebRequest -Method POST -Uri http://localhost:3005/api/auth/login -Headers @{"Content-Type"="application/json"} -Body '{"username":"admin","password":"123456"}' | Select-Object StatusCode

# 在浏览器刷新 http://localhost:3004 并测试登录


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 小提示：
- 如果数据库密码不确定，请联系数据库管理员
- JWT密钥会自动生成，不需要记住
- 后端启动后请勿关闭终端窗口
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

